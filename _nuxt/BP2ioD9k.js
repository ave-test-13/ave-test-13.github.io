import{bf as a,aT as t,Q as e,R as s,ac as o,a2 as n,f as c,v as r,g as i,c as l,o as u,U as p,a as d,am as m,K as f,w as g,b as v,J as x,t as b,H as y,d as _,i as h,aO as k,b6 as w,bI as C,ox as $,oy as F,b5 as G,bK as T,_ as B}from"./BYaUYrp3.js";import{E as D,a as j}from"./VJjMdd4b.js";import"./95DCypv_.js";import"./BPqlXwqI.js";import{E as A}from"./WvUrR8VT.js";import"./CMAkCGHu.js";function E(c="add"){const{$i18n:r}=a();return new Promise(((i,l)=>{t.prompt("",r.t("enterGroupName"),{confirmButtonText:r.t("confirm1"),cancelButtonText:r.t("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||(l(),r.t("maximum10characters")):(l(),r.t("enterGroupName"))}).then((({value:t})=>{"add"===c?function(t,c,r){const{evmAddress:i}=e(),{address:l}=s(),{$i18n:u}=a(),p=A.service();o(t,i||l).then((()=>{n.success(u.t("success")),c(!0)})).catch((a=>{n.error(u.t("fail")),r()})).finally((()=>{p.close()}))}(t,i,l):i(t)}))}))}const N={class:"w-full px-5px [&&]:text-12px"},z=["onClick"],I=["onClick"],V=B(c({__name:"dialogGroupManage",props:{list:{type:Array,default:()=>[]},getData:{type:Function,default:()=>{}},loading:Boolean},setup(a){const{t:o}=r(),c=e(),B=s(),A=i((()=>c.evmAddress||B.address)),V=C(T.FAV_DIALOG),H=a,K=i((()=>H.list.slice(1)));async function L(a){const{value:e}=await t.prompt("",o("enterRemark"),{confirmButtonText:o("confirm1"),cancelButtonText:o("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||o("maximum10characters"):o("cannotBeEmpty")});!async function(a,t){try{await w(a,t,A.value),n.success(o("success")),H.getData(),V.emit({type:"changeFavoriteGroupName"})}catch(e){}}(e,a.group_id)}async function M(a,t,e){const s=a.group_id,c=t+e;if(c<0||c+1>K.value.length)return;const r=K.value[c].group_id;try{await F(s,r,A.value),n.success(o("success")),H.getData()}catch(i){n.error(o("fail"))}}async function O(){await E(),H.getData(),V.emit({type:"changeFavoriteGroupName"})}return(e,s)=>{const c=k,r=D,i=y,w=j,C=m;return u(),l("div",N,[p((u(),f(w,{data:h(K),height:"325px",class:"[--el-font-size-base:12px] table-fav-group"},{empty:g((()=>[v(c)])),default:g((()=>[v(r,{label:e.$t("groupName"),prop:"name"},null,8,["label"]),v(r,{label:e.$t("rename"),align:"center"},{default:g((({row:a})=>[d("span",{class:"cursor-pointer",onClick:x((t=>L(a)),["stop","prevent"])},b(e.$t("edit")),9,z)])),_:1},8,["label"]),v(r,{prop:"name",label:e.$t("sort"),align:"center"},{default:g((({row:a,$index:t})=>[v(i,{size:"large",link:"",disabled:0===t,onClick:x((e=>async function(a,t){if(0!==t)try{await $(a.group_id,A.value),n.success(o("success")),H.getData()}catch(e){n.error(o("fail"))}}(a,t)),["stop"])},{default:g((()=>[_(b(e.$t("top")),1)])),_:2},1032,["disabled","onClick"]),v(i,{link:"",size:"large",disabled:0===t,onClick:x((e=>M(a,t,-1)),["stop"])},{default:g((()=>[_(b(e.$t("up")),1)])),_:2},1032,["disabled","onClick"]),v(i,{link:"",size:"large",disabled:t+1===h(K).length,onClick:x((e=>M(a,t,1)),["stop"])},{default:g((()=>[_(b(e.$t("down")),1)])),_:2},1032,["disabled","onClick"])])),_:1},8,["label"]),v(r,{label:e.$t("operate"),align:"center"},{default:g((({row:a})=>[d("span",{class:"cursor-pointer",onClick:x((e=>async function(a){await t.confirm(o("removeFavGroupTips"),o("tips"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),dangerouslyUseHTMLString:!0,customClass:""});try{await G(a.group_id,A.value),n.success(o("success")),H.getData(),V.emit({type:"removeFavoriteGroup",groupId:a.group_id})}catch(e){}}(a)),["stop","prevent"])},b(e.$t("delete")),9,I)])),_:1},8,["label"])])),_:1},8,["data"])),[[C,a.loading]]),d("span",{class:"mt-20px cursor-pointer px-26px py-12px text-14px font-500 radius-6px block text-center color-[--main-text] bg-[--d-3F80F7-l-EAECEF] hover:opacity-80",onClick:O},b(h(o)("newGroup")),1)])}}}),[["__scopeId","data-v-59356406"]]);export{V as default};
