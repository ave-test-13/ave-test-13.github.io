import{f as e,gr as a,ah as s,aA as r,v as t,Q as d,gs as o,R as n,P as i,I as l,r as c,n as u,gt as p,b1 as m,g as f,gu as y,c as g,o as h,B as k,i as v,F as x,K as S,gv as A,C as B,J as C,ad as _,a2 as R,_ as b}from"./BYaUYrp3.js";import{u as E}from"./C6tr9Oyh.js";const w=b(e({__name:"remark",props:{remark:{type:String,default:""},address:{type:String,default:""},chain:{type:String,default:""},priority:{type:Number,default:0},teleported:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},formatAddress:{type:Function,default:e=>"*"+(null==e?void 0:e.slice(-6))},mouseoverAddress:{type:Function,default:null},addressClass:{type:String,default:""},addressStyle:{type:String,default:""},iconEditColor:{type:String,default:"var(--third-text)"},showAddressTitle:{type:Boolean,default:!1},iconEditSize:{type:String,default:"12px"},iconSize:{type:String,default:"16px"},showAddress:{type:Boolean,default:!0},maxRemarkLength:{type:Number,default:14},wallet_logo:{type:Object,default:()=>({logo:"",name:"",url:"",vip_logo:""})},canEdit:{type:Boolean,default:!0},avatarClass:{type:String,default:"mr-10px"}},emits:["refresh"],setup(e,{emit:b}){a((a=>({e71d04d8:e.iconEditColor,"6a7ef0a0":e.iconEditSize})));const w=e,I=b,{updateNum3:z}=s(r()),{t:j}=t(),F=d(),N=o(),P=n(),L=i("target"),J=l(!1),K=c(!1);let O;function Q(e){const a=e.remark;a.length<=20?function(e){const a={address:w.address,name:e,chain:w.chain};K.value=!0,E(a).then((()=>{R.success(j("success")),z.value++,I("refresh")})).catch((e=>{R.error(e.message)})).finally((()=>{K.value=!1}))}(a):R.error(j("maximum10characters"))}return u((()=>{if(L.value){const e=p(L,(([e])=>{J.value=e.isIntersecting}));O=e.stop}})),m((()=>{O&&O()})),f((()=>{const e=N.getRemarkByAddress({address:w.address,chain:w.chain}),a=w.remark;return e||a})),f((()=>{const e=N.getRemarkByAddress({address:w.address,chain:w.chain}),a=w.remark,s=1===w.priority?a||e:e||a;return y(s,w.maxRemarkLength)||w.formatAddress(w.address)})),f((()=>{const e=N.getRemarkByAddress({address:w.address,chain:w.chain}),a=w.remark;return(1===w.priority?a||e:e||a)||w.address})),(a,s)=>{var r,t,d;const o=B;return h(),g("div",{ref_key:"target",ref:L,class:"remark-com"},[e.canEdit&&v(J)?(h(),g(x,{key:0},[(null==(t=null==(r=v(F))?void 0:r.userInfo)?void 0:t.evmAddress)||(null==(d=v(P))?void 0:d.address)?(h(),S(A,{key:0,address:e.address,chain:e.chain,remark:e.remark,popoverProps:{width:320,title:v(j)("editRemark"),popperClass:"[&&]:[--el-popover-title-text-color:--main-text] [&&]:[--el-popover-title-font-size:14px]"},onConfirm:Q},null,8,["address","chain","remark","popoverProps"])):(h(),S(o,{key:1,name:"custom:remark",class:"text-12px ml-5px clickable icon-remark shrink-0",onClick:C(v(_),["stop","prevent"])},null,8,["onClick"]))],64)):k("",!0)],512)}}}),[["__scopeId","data-v-a07ba607"]]);export{w as default};
