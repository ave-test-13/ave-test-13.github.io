import{f as e,v as l,ah as a,y as t,r as o,m as n,j as r,g as s,T as u,c as i,o as p,F as c,a as d,b as m,B as f,J as v,G as x,t as g,D as b,i as k,C as _,w as h,at as y,s as w,H as C,d as F,Z as V,U as $,K as N,bd as G,be as A,N as R,p as D,_ as j}from"./BYaUYrp3.js";import{E}from"./BPqlXwqI.js";import z from"./Cyv_1-NX.js";import{V as U}from"./D9vaUrfR.js";const B={class:"w-tabs flex-1 flex-wrap"},I=["onClick"],S={class:"clickable color-[--secondary-text]! flex gap-2px bg-[--main-input-button-bg]!"},q={class:"font-500 text-14px lh-[120%] tracking-0% text-[--main-text]"},M={class:"mb-8px text-14px lh-[120%]"},O={class:"flex-between w-100%"},H={class:"flex-between w-100%"},J=j(e({__name:"proGroups",props:{options:{type:Array,default:()=>[]},modelValue:{type:Number,default:0}},emits:["onConfirm","onDelete","onCancel","update:modelValue","onChangeIndex","onAdd","update:options"],setup(e,{emit:j}){const{t:J}=l(),{lang:K,isDark:L}=a(t()),P=j,T=e,Z=o({buttonRefs:{}}),Q=o(T.options);n((()=>T.options),(e=>{Q.value=e}));const W=o(),X=r({groupName:""}),Y=s((()=>({groupName:[{required:!0,message:J("groupName")+(K.value.indexOf("zh")>-1?"":"&nbsp;")+J("cannotBeEmpty"),trigger:"change"}]}))),ee=o(""),le=o({}),ae=o(),te=o(!1),oe=o(),ne=o(),re=o(),se=o(),ue=o(!1);function ie(){Q.value=T.options}function pe(){te.value=!1,le.value[ae.value]=!1}function ce(){le.value[ae.value]=!0,D((()=>{var e;null==(e=document.querySelector(".name-input input"))||e.focus()}))}function de(){le.value[ae.value]=!1,P("onCancel",ae.value)}function me(){P("onDelete",ae.value)}function fe(){var e,l;P("onAdd",ee.value),null==(l=null==(e=re.value)?void 0:e.close)||l.call(e)}function ve(){var e,l;null==(l=null==(e=se.value)?void 0:e.hide)||l.call(e),P("onChangeIndex",Q.value.map((e=>e.group_id)))}return n((()=>le.value),(e=>{}),{deep:!0}),n(ee,(e=>{})),(e,l)=>{const a=_,t=E,o=C,n=V,r=R,s=A,D=G,j=u("click-outside");return p(),i(c,null,[d("ul",B,[d("li",{class:x(["clickable text-[--third-text]",{active:0===T.modelValue}]),onClick:l[0]||(l[0]=v((e=>P("update:modelValue",0)),["stop","prevent"]))},[d("span",null,g(e.$t("defaultGroup")),1)],2),T.options.length>0?(p(!0),i(c,{key:0},b(T.options,(e=>(p(),i("li",{key:e.group_id,class:x(["clickable flex gap-2px text-[--third-text]",{active:T.modelValue===e.group_id}]),onClick:v((l=>P("update:modelValue",e.group_id)),["stop","prevent"])},[d("span",null,g(e.name),1),m(a,{ref_for:!0,ref:l=>k(Z).buttonRefs[e.group_id]=l,name:"mdi:dots-vertical",class:"text-14px",onClick:v((l=>{oe.value=k(Z).buttonRefs[e.group_id],te.value=!0,ae.value=e.group_id,k(X).groupName=e.name}),["stop","prevent"])},null,8,["onClick"])],10,I)))),128)):f("",!0),d("li",{ref_key:"addButtonRef",ref:ne,class:"clickable color-[--secondary-text]! flex gap-2px bg-[--main-input-button-bg]!"},[m(a,{name:"custom:add-icon",class:"text-12px"}),d("span",null,g(e.$t("newGroup")),1)],512),m(n,{ref_key:"popoverRef2",ref:se,width:320,trigger:"click",onAfterLeave:ie},{reference:h((()=>[d("li",S,[m(a,{name:"custom:list-icon",class:"text-12px"}),d("span",null,g(e.$t("groupManage")),1)])])),default:h((()=>[d("div",q,[d("div",M,g(e.$t("groupManage")),1),m(t,{"wrap-class":"mb-12px max-h-[400px]"},{default:h((()=>[m(k(U),y({modelValue:k(Q),"onUpdate:modelValue":l[1]||(l[1]=e=>w(Q)?Q.value=e:null),class:"flex flex-col",tag:"ul"},{animation:300},{"item-key":"show_index",onStart:l[2]||(l[2]=e=>ue.value=!0),onEnd:l[3]||(l[3]=e=>ue.value=!1)}),{default:h((()=>[(p(!0),i(c,null,b(k(Q),(e=>(p(),i("li",{key:null==e?void 0:e.show_index,class:"flex-between font-400 py-12px px-8px hover:bg-[--d-2A2A2A-l-F2F2F2] cursor-move"},[d("span",null,g(null==e?void 0:e.name),1),m(a,{name:"material-symbols:dehaze",class:"text-16px text-[--third-text]"})])))),128))])),_:1},16,["modelValue"])])),_:1}),d("div",O,[m(o,{color:k(L)?"#1F242C":"#D9E8FF",class:"flex-1",onClick:l[4]||(l[4]=v((()=>{var e,l;return null==(l=null==(e=k(se))?void 0:e.hide)?void 0:l.call(e)}),["stop","prevent"]))},{default:h((()=>[F(g(e.$t("cancel")),1)])),_:1},8,["color"]),m(o,{type:"primary",class:"flex-1",color:"#3F80F7",onClick:v(ve,["stop","prevent"])},{default:h((()=>[F(g(e.$t("confirm")),1)])),_:1})])])])),_:1},512)]),m(n,{visible:k(te),"virtual-ref":k(oe),trigger:"click",title:"","virtual-triggering":"","popper-style":"width: 86px;min-width: 86px;"},{default:h((()=>[$((p(),i("ul",null,[d("li",{class:"font-400 text-12px lh-[100%] tracking-0px mb-20px flex-start gap-4px clickable",onClick:v(ce,["stop","prevent"])},[m(a,{name:"fe:edit",class:"color-#666 text-14px mt-0px"}),d("span",null,g(e.$t("rename")),1)]),d("li",{class:"font-400 text-12px lh-[100%] tracking-0px clickable flex-start gap-4px",onClick:v(me,["stop","prevent"])},[m(a,{name:"bx:bxs-trash-alt",class:"text-15px color-#666 mt-0px"}),d("span",null,g(e.$t("delete")),1)])])),[[j,()=>te.value=!1]])])),_:1},8,["visible","virtual-ref"]),m(n,{visible:k(le)[k(ae)],"virtual-ref":k(oe),trigger:"click",title:e.$t("rename"),"virtual-triggering":"","popper-style":"--el-popover-title-font-size:14px;--el-popover-title-text-color:var(--main-text)",width:"248",teleported:!1},{default:h((()=>[$((p(),N(D,{ref_key:"formRef",ref:W,model:k(X),rules:k(Y),onSubmit:l[6]||(l[6]=v((e=>{var l;(l=k(W))&&l.validate(((e,l)=>{var a;e&&(P("onConfirm",ae.value,X.groupName),null==(a=W.value)||a.resetFields(),le.value[ae.value]=!1)}))}),["prevent","stop"]))},{default:h((()=>[m(s,{prop:"groupName","label-position":"top",size:"large",class:"mb-20px!"},{default:h((()=>[m(r,{modelValue:k(X).groupName,"onUpdate:modelValue":l[5]||(l[5]=e=>k(X).groupName=e),class:"[&&]:[--el-fill-color-blank:var(--d-666-l-F2F2F2)] [%%]:[el-input__count-inner:transparent]",placeholder:k(J)("enterGroupName"),maxlength:50,"show-word-limit":"",clearable:""},null,8,["modelValue","placeholder"])])),_:1}),m(s,{class:"mb-0px!"},{default:h((()=>[d("div",H,[m(o,{color:k(L)?"#1F242C":"#D9E8FF",class:"flex-1",onClick:v(de,["stop","prevent"])},{default:h((()=>[F(g(e.$t("cancel")),1)])),_:1},8,["color"]),m(o,{type:"primary",color:"#3F80F7",class:"flex-1","native-type":"submit"},{default:h((()=>[F(g(e.$t("confirm")),1)])),_:1})])])),_:1})])),_:1},8,["model","rules"])),[[j,pe]])])),_:1},8,["visible","virtual-ref","title"]),m(z,{ref_key:"proPopoverRef",ref:re,modelValue:k(ee),"onUpdate:modelValue":l[7]||(l[7]=e=>w(ee)?ee.value=e:null),"button-ref":k(ne)||{},width:"248",label:e.$t("newGroup"),placeholder:e.$t("enterGroupName"),prop:"name",title:e.$t("newGroup"),onOnConfirm:fe},null,8,["modelValue","button-ref","label","placeholder","title"])],64)}}}),[["__scopeId","data-v-c6393a9b"]]);export{J as default};
