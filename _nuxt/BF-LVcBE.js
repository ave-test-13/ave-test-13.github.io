import{f as t,z as e,Q as l,M as n,bT as a,bO as s,bP as i,R as o,y as u,I as r,r as p,g as c,bS as d,T as x,c as v,o as m,a as g,b as h,B as b,K as f,C as y,t as w,N as S,bZ as k,i as $,s as B,w as _,F as T,D as V,J as F,G as A,b_ as C,Z as q,U as L,b$ as M,d as j,a0 as Q,c0 as G,bM as N,$ as P}from"./Cj-zygGq.js";import{S as U}from"./CP52DD9p.js";const D={class:"items-center inline-flex"},H={class:"w-14px h-14px bg-[--secondary-text] rounded-full flex items-center justify-center"},I={class:"ml-5px mr-5px color-[--secondary-text] text-12px"},K=["src"],O={key:0,class:"ml-20px flex justify-end items-center text-12px"},R={class:"color-[--secondary-text] mr-5px"},Z={class:"flex items-center justify-between p-1px rounded-4px text-12px h-28px bg-[--main-input-button-bg] px-2px py-2px"},z=["id","onClick","onMouseenter"],E={class:"text-14px mt-4px mb-4px flex-start"},J={class:"mr-4px color-[--third-text] text-14px"},W={key:0},X={key:1},Y={key:0,class:"text-14px mt-4px mb-4px flex-start"},tt={class:"mr-4px color-[--third-text] text-14px"},et={key:1,class:"text-14px mt-4px mb-4px flex-start"},lt={class:"mr-4px color-[--third-text] text-14px whitespace-nowrap block"},nt={class:"whitespace-nowrap"},at={class:"text-14px mt-4px mb-4px flex-start"},st={class:"mr-4px color-[--third-text] text-14px whitespace-nowrap"},it={class:"text-14px mt-4px mb-4px flex-start"},ot={class:"mr-4px color-[--third-text] text-14px"},ut=t({__name:"quickSwapSet",props:{chain:{},quickBuyValue:{default:"0.01"},showQuickAmount:{type:Boolean},settingsButtonVisible:{type:Boolean,default:!0}},emits:["update:quickBuyValue"],setup(t,{emit:ut}){e();const rt=l(),pt=n(),ct=a(),dt=s(),xt=i(),vt=o(),mt=ut,gt=t,ht=u(),bt=r(0),ft=p(!1),yt=p("s1"),wt=p({}),St=p(null),kt=c((()=>vt.provider&&vt.address&&!rt.evmAddress)),$t=c((()=>gt.chain&&rt.isSupportChains.includes(gt.chain)&&!kt.value)),Bt=c((()=>gt.settingsButtonVisible&&!kt.value)),_t=c((()=>{var t,e,l;const n=gt.chain;if(!rt.isSupportChains.includes(n))return"";const a=null==(l=null==(e=null==(t=dt.botSettings)?void 0:t[n])?void 0:e.buy)?void 0:l[yt.value],s=null==a?void 0:a.mev,{gasTip1List:i,gasTip2List:o}=d(ct.gasTip,n),u=s?i:o,r=s?0:1,p=null==a?void 0:a.gas[r];return(null==p?void 0:p.customFee)||(null==u?void 0:u[null==p?void 0:p.level])})),Tt=c({get:()=>gt.quickBuyValue,set(t){mt("update:quickBuyValue",t)}});function Vt(t){t&&(null==t?void 0:t.id)&&(wt.value[null==t?void 0:t.id]=t)}function Ft(t){yt.value=t,St.value=wt.value[t]||null,ft.value=!0,function(){var t;const e=gt.chain;if(!M(e))return;null==(t=G(e))||t.getFeeData().then((t=>{t&&(bt.value=new Q(t.gasPrice||0).toNumber())}))}()}function At(){var t,e,l,n,a,s,i,o,u;const r=gt.chain;if(M(r)&&(null==(t=null==rt?void 0:rt.isSupportChains)?void 0:t.includes(r))){const t=null==(n=null==(l=null==(e=dt.botSettings)?void 0:e[r])?void 0:l.buy)?void 0:n[yt.value],p=null==t?void 0:t.mev,c=(null==(s=null==(a=ct.mainTokensPrice)?void 0:a.find((t=>{var e;return t.chain===r&&t.token===(null==(e=N(r))?void 0:e.wmain_wrapper)})))?void 0:s.current_price_usd)||xt.swap.native.price||0,{gasTip1List:x,gasTip2List:v}=d(ct.gasTip,r),m=p?x:v,g=p?null==t?void 0:t.gas[0]:null==t?void 0:t.gas[1],h=(null==g?void 0:g.customFee)||(null==m?void 0:m[null==g?void 0:g.level])||"3",b=(null==(u=null==(o=null==(i=ct.gasTip)?void 0:i.find)?void 0:o.call(i,(t=>t.chain===r&&t.mev===!!p)))?void 0:u.gasLimit)||2e5;return P(new Q(bt.value).plus(new Q(h).times(String(10**9))).times(b).times(c).div(String(10**18)).toFixed(),2)}return 0}return(t,e)=>{var l;const n=y,a=S,s=q,i=x("tooltip");return m(),v("div",D,[g("span",H,[h(n,{class:"color-[--main-bg] text-10px",name:"mynaui:lightning-solid"})]),g("span",I,w(t.$t("quick")),1),h(a,{modelValue:$(Tt),"onUpdate:modelValue":e[0]||(e[0]=t=>B(Tt)?Tt.value=t:null),modelModifiers:{trim:!0},style:{"--el-input-text-color":"var(--main-text)","border-radius":"4px",width:"88px",height:"28px"},placeholder:"0",clearable:"",type:"text",onInput:e[1]||(e[1]=t=>{Tt.value=t.replace(/\-|[^\d.]/g,"")}),onBlur:e[2]||(e[2]=t=>function(t){var e,l,n;const a=t,s=(null==(n=null==(l=null==(e=new Q(a||0))?void 0:e.toFixed)?void 0:l.call(e).match(new RegExp("[0-9]*(\\.[0-9]{0,4})?")))?void 0:n[0])||"";String(a)!==String(s)&&(""===a?Tt.value="":0===Number(s)?Tt.value="0":Tt.value=s)}($(Tt))),onKeydown:e[3]||(e[3]=k((t=>{var e;return null==(e=null==t?void 0:t.target)?void 0:e.blur()}),["enter"]))},{prefix:_((()=>[t.chain?(m(),v("img",{key:0,class:"rounded-full w-14px h-14px mr-4px!",src:`${$(pt).token_logo_url}chain/${t.chain}.png`,alt:"",onerror:"this.src='/icon-default.png'",srcset:""},null,8,K)):b("",!0)])),_:1},8,["modelValue"]),$($t)&&$(Bt)?(m(),v("div",O,[g("span",R,w(t.$t("default")),1),g("div",Z,[(m(!0),v(T,null,V("BotSettingsArr"in t?t.BotSettingsArr:$(C),(l=>{var n,a,s;return m(),v("button",{id:l.value,key:l.value,ref_for:!0,ref:Vt,class:A(["cursor-pointer border-none font-400 rounded-4px min-w-36px py-5px px-10px text-center",""+(l.value===(null==(s=null==(a=null==(n=$(dt).botSettings)?void 0:n[t.chain])?void 0:a.buy)?void 0:s.selected)?"color-[--main-text] bg-[--tab-active-bg]":"color-[--secondary-text] bg-transparent")]),type:"button",onClick:F((e=>$(dt).botSettings[t.chain].buy.selected=l.value),["stop"]),onMouseenter:t=>Ft(l.value),onMouseleave:e[4]||(e[4]=t=>ft.value=!1)},w(l.label),43,z)})),128))])])):b("",!0),$($t)?(m(),f(U,{key:1,class:"ml-12px",chain:t.chain,setting:null==(l=$(dt))?void 0:l.botSettings[t.chain],showQuickAmount:t.showQuickAmount},null,8,["chain","setting","showQuickAmount"])):b("",!0),h(s,{visible:$(ft),"onUpdate:visible":e[5]||(e[5]=t=>B(ft)?ft.value=t:null),"popper-class":"new-popover","virtual-ref":$(St),"virtual-triggering":"",trigger:"contextmenu",placement:"bottom","popper-style":"min-width: auto; width: auto;"},{default:_((()=>{var e,l,a,s,o,u,r,p,c,d,x,f,y;return[g("ul",null,[g("li",E,[L(h(n,{name:"custom:slippage",class:"text-14px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[i,t.$t("slippage")]]),g("span",J,w(t.$t("slippage")),1),"auto"!==(null==(s=null==(a=null==(l=null==(e=$(dt).botSettings)?void 0:e[t.chain])?void 0:l.buy)?void 0:a[$(yt)])?void 0:s.slippage)?(m(),v("span",W,w(null==(p=null==(r=null==(u=null==(o=$(dt).botSettings)?void 0:o[t.chain||""])?void 0:u.buy)?void 0:r[$(yt)])?void 0:p.slippage)+"%",1)):(m(),v("span",X,w(t.$t("auto")),1))]),$(M)(t.chain||"")?(m(),v("li",Y,[L(h(n,{name:"custom:gas",class:"text-14px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[i,t.$t("estimatedGas")]]),g("span",tt,w(t.$t("estimatedGas")),1),j(" $"+w(At()),1)])):b("",!0),"solana"===t.chain?(m(),v("li",et,[L(h(n,{name:"custom:gas",class:"text-14px color-[--third-text] mr-6px cursor-pointer ml-0"},null,512),[[i,t.$t("priorityFee")]]),g("span",lt,w(t.$t("priorityFee")),1),g("span",nt,w($(_t))+" SOL",1)])):b("",!0),g("li",at,[L(h(n,{name:`custom:half-${$(ht).mode}`,class:"text-18px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,8,["name"]),[[i,t.$t("autoSellHalf")]]),g("span",st,w(t.$t("autoSellHalf")),1),j(" "+w((null==(c=$(dt).autoSellConfigs)?void 0:c.autoSell)?t.$t("on"):t.$t("off")),1)]),g("li",it,[L(h(n,{name:"custom:mev",class:"text-16px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[i,t.$t("mev")]]),g("span",ot,w(t.$t("mev")),1),j(" "+w((null==(y=null==(f=null==(x=null==(d=$(dt).botSettings)?void 0:d[t.chain])?void 0:x.buy)?void 0:f[$(yt)])?void 0:y.mev)?t.$t("on"):t.$t("off")),1)])])]})),_:1},8,["visible","virtual-ref"])])}}});export{ut as _};
