const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DIyEWMjP.js","./BYaUYrp3.js","./entry.CopnuN2b.css","./YMS0lBpe.js","./BPqlXwqI.js","./scrollbar.wwf0UyhQ.css","./95DCypv_.js","./tag.C2CcED8f.css","./select.CdhMYGFy.css","./CeKc5CNo.js","./vLoading.DzkBmIP9.css","./CtqcrtEU.js","./CMAkCGHu.js","./visibleChange.B6TrAqUJ.css","./X1xoQqTK.js","./DErwBm74.js","./BRtJHuoe.js","./LAamq4cb.js","./BRpM0hlH.js","./CmhOgDxg.js","./input-number.HwP0nlBD.css","./J5O7_dcT.js","./switch.DT829VzR.css","./slippageSet.V03ztxJ3.css","./slippageSetMarket.C1TnkaRM.css","./VJjMdd4b.js","./table.D1Uy_Ymd.css","./tabs.Bq1v7sO2.css","./C8xICoRm.js","./limit.Dw7c2NPG.css"])))=>i.map(i=>d[i]);
import{f as e,R as l,v as a,g as n,c as o,o as t,F as u,D as s,G as i,i as r,bM as d,a as v,t as c,_ as m,K as p,w as f,M as k,B as b,U as h,b as T,a5 as y,C as g,am as w,J as x,cv as _,$ as S,aN as I,r as A,m as N,nZ as $,E as F,s as C,N as P,b_ as R,bd as M,bx as E,n_ as V,aE as U,e7 as B,H as D,d as O,aT as H,bg as j,aH as L,X as z,a4 as W,n$ as q,a0 as X,fn as K,T as Z,b3 as G,bo as Q,o0 as J,cZ as Y,o1 as ee,bP as le,I as ae,ay as ne,cg as oe,fs as te,o2 as ue,hi as se,e4 as ie,o3 as re,dh as de,di as ve,fl as ce,o4 as me,bN as pe,P as fe,ff as ke,aI as be,aJ as he,o5 as Te,Q as ye,cw as ge,o6 as we,o7 as xe,fg as _e,cz as Se,fi as Ie,o8 as Ae,o9 as Ne,oa as $e,ob as Fe,fj as Ce,oc as Pe,fo as Re,fm as Me,od as Ee,fh as Ve,oe as Ue,of as Be,og as De,fk as Oe,oh as He,oi as je,fe as Le,oj as ze,fp as We,bR as qe,ok as Xe,ol as Ke,fq as Ze,fr as Ge,as as Qe,an as Je,ax as Ye,n as el}from"./BYaUYrp3.js";import{a as ll,E as al}from"./DErwBm74.js";import{E as nl}from"./BPqlXwqI.js";import{E as ol,a as tl}from"./LAamq4cb.js";import{E as ul}from"./BRpM0hlH.js";import{E as sl}from"./CtqcrtEU.js";import{_ as il}from"./C8xICoRm.js";import{a as rl,b as dl}from"./X1xoQqTK.js";const vl={class:"tabs"},cl=["disabled","onClick"],ml=m(e({__name:"tabs",props:{activeTab:{type:Number,default:0}},emits:["update:activeTab"],setup(e,{emit:m}){const p=l(),{t:f}=a(),k=m,b=["sui","solana","tron","ton"],h=n((()=>[{name:f("buy"),value:0},{name:f("sell"),value:1}]));return(l,a)=>(t(),o("div",vl,[(t(!0),o(u,null,s(r(h),((a,n)=>{var u,s,m;return t(),o("button",{key:n,class:i(["tab-item",{active:a.value===e.activeTab,[`tab-${a.value}`]:!0}]),type:"button",disabled:"evm"!==(null==(s=("getChainInfo"in l?l.getChainInfo:r(d))((null==(u=r(p))?void 0:u.chain)||""))?void 0:s.vm_type)&&!b.includes((null==(m=r(p))?void 0:m.chain)||""),onClick:e=>{return l=a.value,void k("update:activeTab",l);var l}},[v("span",null,c(a.name),1)],10,cl)})),128))]))}}),[["__scopeId","data-v-5206989c"]]),pl=m(e({__name:"typeTabs",props:{isOnlyMarket:{type:Boolean,default:!1},tab:{type:Number,default:0}},emits:["update:tab"],setup(e,{emit:i}){const d=e,v=i,c=l(),{t:m}=a(),k=n((()=>{if(d.isOnlyMarket)return[{name:m("swapT"),value:2}];return"solana"===(c.chain||"")?[{name:m("swapT"),value:2},{name:m("limitT"),value:0}]:[{name:m("swapT"),value:2},{name:m("limitT"),value:0},{name:m("stopLimit"),value:1}]}));return(l,a)=>{const n=ll,i=al;return t(),p(i,{"model-value":e.tab,class:"select-tabs","onUpdate:modelValue":a[0]||(a[0]=e=>v("update:tab",e))},{default:f((()=>[(t(!0),o(u,null,s(r(k),((e,l)=>(t(),p(n,{key:l,label:e.name,name:e.value},null,8,["label","name"])))),128))])),_:1},8,["model-value"])}}}),[["__scopeId","data-v-816d704f"]]),fl="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='11px'%20height='3px'%20viewBox='0%200%2011%203'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e编组%3c/title%3e%3cg%20id='交易+挂单'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='交易-市价交易-买备份'%20transform='translate(-268.000000,%20-584.000000)'%20fill='%23999999'%20fill-rule='nonzero'%3e%3cg%20id='提示文案'%20transform='translate(14.000000,%20508.000000)'%3e%3cg%20id='编组-9备份-3'%20transform='translate(0.000000,%2063.000000)'%3e%3cg%20id='编组'%20transform='translate(254.000000,%2013.000000)'%3e%3cpolygon%20id='路径'%20points='9.53333333%200%2011%200%209.77777778%201.13999999%207.88333333%203%207.15%202.28%208.31111112%201.13999999%200%201.13999999%200%200'%3e%3c/polygon%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",kl={class:"history"},bl={key:0,class:"flex gap-5px mb-32px"},hl=["onClick"],Tl={class:"flex-column mt-6px"},yl={class:"flex-start"},gl={class:"token-symbol font-14"},wl={key:0,class:"risk-status high"},xl={class:"flex-start color-[--secondary-text] text-16px font-500 mb-10px"},_l={class:"ml-5px"},Sl={class:"content color-[--main-text]"},Il=["onClick"],Al={class:"token-info"},Nl={class:"flex-column"},$l={class:"flex-start"},Fl={class:"token-symbol font-14"},Cl={key:0,class:"risk-status high"},Pl={key:0,class:"px-5px py-0 color-[--third-text]"},Rl={key:0,class:"flex flex-col text-right"},Ml=["innerHTML"],El=["innerHTML"],Vl={key:2,class:"empty"},Ul=m(e({__name:"searchTable",props:{searchTokens:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},disabledToken:{type:String,default:""}},emits:["onSelect"],setup(e,{emit:l}){const a=e,d=l;k().chainConfig;const m={bsc:{BNB:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WBNB:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",USDT:"0x55d398326f99059ff775485246999027b3197955",USDC:"0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d",USD1:"0x8d0d000ee44948fc98c9b98a4fa4921476f08b0d"},eth:{base:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WETH:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",USDT:"0xdac17f958d2ee523a2206206994597c13d831ec7",USDC:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",USD1:"0x8d0d000ee44948fc98c9b98a4fa4921476f08b0d"},base:{ETH:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WETH:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",USDT:"0xfde4c96c8593536e31f229ea8f37b2ada2699bb2",USDC:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913"},xlayer:{OKB:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WOKB:"0xe538905cf8410324e03a5a23c1c177a474d59b2b",USDT:"0x5b827940327c99e255ff498206703bffaa625a43",USDC:"0x74b7f16337b8972027f6196a17a631ac6de26d22"},solana:{SOL:"So11111111111111111111111111111111111111112",USDT:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"}},A=n((()=>{var e;const l=[...new Set(Object.values(m).flatMap((e=>Object.values(e))))];return null==(e=a.searchTokens)?void 0:e.filter((e=>null==l?void 0:l.includes(e.address||"")))}));function N(e){((null==e?void 0:e.address)||(null==e?void 0:e.token))&&a.disabledToken!==e.address&&d("onSelect",e)}return(l,a)=>{var n,d;const m=y,k=g,$=nl,F=w;return t(),o("div",kl,[(null==(n=r(A))?void 0:n.length)>0?(t(),o("div",bl,[(t(!0),o(u,null,s(r(A),((e,a)=>(t(),o("div",{class:"item bg-[--border] rounded-12px px-12px py-12px flex flex-col items-center justify-center flex-1 max-w-20%",key:a,onClick:l=>N(e)},[T(m,{row:e,tokenClass:"w-32px h-32px"},null,8,["row"]),v("div",Tl,[v("div",yl,[v("span",gl,c(e.symbol),1),(((null==e?void 0:e.risk_score)||0)>55||((null==e?void 0:e.risk_level)||0)<0)&&1!==e.risk_level?(t(),o("span",wl,c(l.$t("highRisk")),1)):b("",!0)])])],8,hl)))),128))])):b("",!0),v("div",xl,[T(k,{class:"text-24px",name:"custom:my-token"}),v("span",_l,c(l.$t("myToken")),1)]),(null==(d=e.searchTokens)?void 0:d.length)>0?h((t(),p($,{key:1,height:"calc(45vh)",class:"hidden-scrollbar"},{default:f((()=>[v("ul",Sl,[(t(!0),o(u,null,s(e.searchTokens,((a,n)=>{var u,s;return t(),o("li",{key:n,class:i([{disabled:e.disabledToken===a.address},"flex justify-between px-16px py-16px clickable hover:bg-[--dialog-list-hover]"]),onClick:x((e=>N(a)),["stop","prevent"])},[v("div",Al,[T(m,{class:"mr-5px",row:a,tokenClass:"w-40px h-40px"},null,8,["row"]),v("div",Nl,[v("div",$l,[v("span",Fl,c(a.symbol),1),(((null==a?void 0:a.risk_score)||0)>55||((null==a?void 0:a.risk_level)||0)<0)&&1!==a.risk_level?(t(),o("span",Cl,c(l.$t("highRisk")),1)):b("",!0)]),(null==a?void 0:a.tags)||a.address===r(_)?b("",!0):(t(),o("span",Pl,c(null==(u=a.token)?void 0:u.slice(0,4))+"**"+c(null==(s=a.token)?void 0:s.slice(-4)),1))])]),(a.amount||0)>0||(a.value||0)>0||(a.balance||0)>0?(t(),o("div",Rl,[v("span",{class:"color-[--main-text]",innerHTML:`$ ${r(S)((a.current_price_usd||a.price||0)*((null==a?void 0:a.amount)||(null==a?void 0:a.value)||a.balance||0))}`},null,8,Ml),v("span",{class:"color-[--third-text] py-2px",innerHTML:a.amount||a.value||a.balance?r(S)((null==a?void 0:a.amount)||(null==a?void 0:a.value)||a.balance||""):""},null,8,El)])):b("",!0)],10,Il)})),128))])])),_:1})),[[F,e.loading]]):(t(),o("div",Vl,[v("div",null,[a[0]||(a[0]=v("img",{src:I},null,-1)),a[1]||(a[1]=v("br",null,null,-1)),v("span",null,c(l.$t("noSearchResults")),1)])]))])}}}),[["__scopeId","data-v-3cf6f40e"]]),Bl={class:"text-14px color-[--main-text] font-400 ml-3px"},Dl={key:1},Ol={class:"text-20px font-500"},Hl={class:"search-content mt-16px"},jl=m(e({__name:"selectSwapToken",props:{tokens:{type:Array,default:()=>[]},token:{type:Object,default:()=>({token:"",address:"",symbol:"",logo_url:"",chain:""})},chain:{type:String,default:""},disabledToken:{type:String,default:""}},emits:["update:token"],setup(e,{emit:l}){const{t:s}=a(),d=e,m=l,k=A(!1),b=A(""),h=A(d.tokens||[]),w=A(!1),_=n((()=>{var e;return(null==(e=h.value)?void 0:e.length)>0?h.value:d.tokens||[]}));N(b,(e=>{""!==e?I():h.value=d.tokens})),N(k,(e=>{e&&(h.value=d.tokens||[],b.value="")}));let S=null;function I(){S&&(clearTimeout(S),S=null),S=setTimeout((()=>{!function(){var e;if(""!==b.value){const l=new RegExp(b.value,"i"),a=(null==(e=d.tokens)?void 0:e.filter((e=>l.test((null==e?void 0:e.address)||"")||l.test((null==e?void 0:e.symbol)||"")||l.test((null==e?void 0:e.name)||""))))||[];w.value=!0,$(b.value,d.chain).then((e=>{var l,n,o;const t=null==(o=null==(n=null==(l=e.filter)?void 0:l.call(e,(e=>e.chain===d.chain&&!a.some((l=>l.token===e.token)))))?void 0:n.map)?void 0:o.call(n,(e=>({...e,address:e.token})));h.value=[...a,...t]})).catch((e=>{h.value=[]})).finally((()=>{w.value=!1}))}else h.value=d.tokens}()}),500)}function M(e){var l,a;e.address!==d.disabledToken&&((null==e?void 0:e.address)||(null==e?void 0:e.token))&&(m("update:token",{...e,value:(null==(l=null==e?void 0:e.value)?void 0:l.toString())||0,balance:(null==(a=null==e?void 0:e.balance)?void 0:a.toString())||0}),k.value=!1)}return(e,l)=>{var a,n,m,h;const S=y,A=g,N=P,$=F;return t(),o(u,null,[v("button",{class:"flex items-center bg-transparent border-none p-0 clickable text-14px",type:"button",onClick:l[0]||(l[0]=x((e=>k.value=!0),["stop"]))},[(null==(a=d.token)?void 0:a.address)||(null==(n=d.token)?void 0:n.token)?(t(),o(u,{key:0},[(t(),p(S,{key:null==(m=d.token)?void 0:m.address,row:d.token},null,8,["row"])),v("span",Bl,c((null==(h=d.token)?void 0:h.symbol)||""),1)],64)):(t(),o("div",Dl,c(e.$t("pleaseSelectToken")),1)),T(A,{class:i(["arrow-up",{active:!0===r(k)}]),name:"solar:alt-arrow-down-bold"},null,8,["class"])]),T($,{modelValue:r(k),"onUpdate:modelValue":l[3]||(l[3]=e=>C(k)?k.value=e:null),"append-to-body":"",class:"new-dialog",width:"420px"},{header:f((()=>[v("span",Ol,c(r(s)("selectToken")),1)])),default:f((()=>[v("div",{class:"search-dialog-container",onClick:l[2]||(l[2]=x((()=>{}),["stop"]))},[T(N,{ref:"inputSearch",class:"search-input",modelValue:r(b),"onUpdate:modelValue":l[1]||(l[1]=e=>C(b)?b.value=e:null),modelModifiers:{trim:!0},placeholder:r(s)("enterAddress/token"),clearable:"",onKeydown:R(I,["enter"])},{prefix:f((()=>[T(A,{class:"text-16px text-[--third-text]",name:"custom:search"})])),_:1},8,["modelValue","placeholder"]),v("div",Hl,[T(Ul,{searchTokens:r(_),loading:r(w),disabledToken:d.disabledToken||d.token.address,onOnSelect:M},null,8,["searchTokens","loading","disabledToken"])])])])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-c6e5211f"]]),Ll={class:"flex items-center"},zl={key:0,class:"mr-5px color-[--main-text]"},Wl={key:1,class:"mr-5px"},ql={class:"text-18px color-#fff font-400"},Xl={class:"slippage-label"},Kl={class:"mt-10px"},Zl=["id","value","disabled"],Gl=["for"],Ql={class:"slippage-input"},Jl={key:0,class:"tip"},Yl={class:"form-submit"},ea=m(e({__name:"slippageSet",props:{slippage:{type:[String,Number],default:"2"},autoSlippage:{type:String,default:"2"},canSetAuto:{type:Boolean,default:!0}},emits:["update:slippage"],setup(e,{emit:l}){const n=e,i=l,{t:d}=a(),m=[.1,.5,1],k=A("auto"===n.slippage?void 0:Number(n.slippage)),y=A(!1),w=A("auto"===n.slippage);function _(){void 0===k.value?i("update:slippage","auto"):i("update:slippage",String(k.value)),y.value=!1}function S(){H.alert(d("slippageTips"),{title:d("slippage"),confirmButtonText:d("iKnown")})}function I(){k.value&&Number(k.value)>49.99&&(k.value=49.99)}function $(e){return Number(e)<=49.99}return N(y,(e=>{e&&(k.value="auto"===n.slippage?void 0:Number(n.slippage))})),N(w,(e=>{e&&(k.value=void 0)})),(l,a)=>{const n=g,i=E,d=U,A=tl,N=ul,P=ol,R=D,H=M,j=F;return t(),o("div",null,[v("div",Ll,[e.canSetAuto?(t(),o("span",zl,c("auto"===e.slippage?l.$t("autoSlippage"):l.$t("manualSlippage"))+"("+c("auto"===e.slippage?e.autoSlippage:e.slippage)+"%) ",1)):(t(),o("span",Wl,c(e.slippage)+"%",1)),T(n,{class:"clickable",name:"tdesign:setting-1",onClick:a[0]||(a[0]=x((e=>y.value=!0),["stop"]))})]),T(j,{modelValue:r(y),"onUpdate:modelValue":a[4]||(a[4]=e=>C(y)?y.value=e:null),width:"500px","append-to-body":""},{header:f((()=>[v("span",ql,c(l.$t("setSlippage")),1)])),default:f((()=>[T(H,{class:"popup-content",onSubmit:x(_,["prevent"])},{default:f((()=>[v("div",Xl,[v("span",null,c(l.$t("slippage")),1),T(i,{size:15,color:"#80838B",style:{cursor:"pointer","margin-left":"5px","margin-right":"auto"},onClick:x(S,["stop"])},{default:f((()=>[T(r(V))])),_:1}),e.canSetAuto?(t(),p(d,{key:0,modelValue:r(w),"onUpdate:modelValue":a[1]||(a[1]=e=>C(w)?w.value=e:null),label:l.$t("autoSlippage"),size:"large"},null,8,["modelValue","label"])):b("",!0)]),v("div",Kl,[T(P,{gutter:10},{default:f((()=>[(t(),o(u,null,s(m,((e,l)=>T(A,{key:l,span:6,class:"radio-group"},{default:f((()=>[h(v("input",{id:`radio-${e}`,"onUpdate:modelValue":a[2]||(a[2]=e=>C(k)?k.value=e:null),type:"radio",value:e,disabled:r(w),class:"radio-input"},null,8,Zl),[[B,r(k)]]),v("label",{for:`radio-${e}`,class:"radio-item"},c(e)+"%",9,Gl)])),_:2},1024))),64)),T(A,{span:6},{default:f((()=>[v("div",Ql,[T(N,{modelValue:r(k),"onUpdate:modelValue":a[3]||(a[3]=e=>C(k)?k.value=e:null),class:"select bg-#212847 w-full",name:"slippage",type:"number",min:0,max:49.99,step:.01,disabled:r(w),"controls-position":"right",clearable:"",rules:[{required:!0,message:l.$t("enterSlippage")},{validator:$,message:l.$t("slippageMaxTip")}],onBlur:I},null,8,["modelValue","disabled","rules"]),a[5]||(a[5]=v("span",{class:"color-fff"},"%",-1))])])),_:1})])),_:1}),void 0!==r(k)&&Number(r(k))<=.1?(t(),o("span",Jl,c(l.$t("slippageTip1")),1)):b("",!0)]),v("div",Yl,[T(R,{class:"swap-button w-full rd-8px!",size:"large",block:"","native-type":"submit",type:"primary",disabled:0==e.slippage},{default:f((()=>[O(c(l.$t("confirm1")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1eb2e286"]]),la={class:"token-item header"},aa={class:"flex-3"},na={class:"flex-1-5"},oa={class:"flex-1 right-label"},ta=["onClick"],ua={class:"token-item"},sa={class:"path-list flex-start flex-3"},ia={key:0},ra={key:1,class:"path-amm"},da={key:0,class:"tag"},va=["innerHTML"],ca=m(e({__name:"selectRouter",props:{visible:{type:Boolean,default:!1},listRouter:{type:Array,default:()=>[]},isAmount:{type:Boolean,default:!1},selectedRouterIndex:{type:Number,default:0}},emits:["getSelectedRouter","update:visible"],setup(e,{emit:l}){const a=e,i=l,d=n({get:()=>a.visible,set(e){i("update:visible",e)}});function m(e){return e>40?"#ff646d":e>10?"#F7933F":e>5?"#f8be46":""}return(l,a)=>{const n=sl,k=L,y=E,g=F;return t(),p(g,{modelValue:r(d),"onUpdate:modelValue":a[0]||(a[0]=e=>C(d)?d.value=e:null),class:"dialog-zixuan dialog",width:"600px"},{header:f((()=>[v("span",null,c(l.$t("selectRouter")),1)])),default:f((()=>[v("ul",null,[v("li",la,[v("span",aa,c(l.$t("router")),1),v("span",na,c(e.isAmount?l.$t("expectedAmount"):l.$t("expectedPay")),1),v("span",oa,c(l.$t("priceImpact")),1),a[1]||(a[1]=v("span",{class:"w-16px"},null,-1))]),h(T(n,{image:r(I)},null,8,["image"]),[[j,e.listRouter&&0===e.listRouter.length]]),(t(!0),o(u,null,s(e.listRouter,((n,d)=>(t(),o("a",{key:d,href:"",onClick:x((e=>(e=>{i("getSelectedRouter",e)})(d)),["stop","prevent"])},[v("li",ua,[v("div",sa,[(t(!0),o(u,null,s((null==n?void 0:n.path)||[],((e,n)=>(t(),o(u,{key:n},[e.symbol?(t(),o("span",ia,c(e.symbol),1)):b("",!0),e.nextAmm&&"unknown"!==e.nextAmm?(t(),o("div",ra,[T(k,{src:("formatIconSwap"in l?l.formatIconSwap:r(z))(e.nextAmm),class:"w-14px h-14px rd-10px mb-3px",style:{width:"14px",height:"14px","border-radius":"10px","margin-bottom":"3px"}},{error:f((()=>a[2]||(a[2]=[v("img",{class:"w-14px rd-10px",src:il},null,-1)]))),placeholder:f((()=>a[3]||(a[3]=[v("img",{class:"w-14px rd-10px",src:il},null,-1)]))),_:2},1032,["src"]),a[4]||(a[4]=v("img",{class:"w-15px mr-5px",src:fl,alt:"",srcset:""},null,-1))])):b("",!0)],64)))),128)),0===d?(t(),o("div",da,c(l.$t("best")),1)):b("",!0)]),v("span",{class:"flex-1-5",innerHTML:("formatNumber"in l?l.formatNumber:r(S))((null==n?void 0:n.amount)||0)},null,8,va),Number((null==n?void 0:n.priceImpact)||0)<10?(t(),o("span",{key:0,class:"right-label flex-1",style:W({color:m(Number(n.priceImpact||0))})},[Number(n.priceImpact)<.01?(t(),o(u,{key:0},[O("<0.01%")],64)):(t(),o(u,{key:1},[O(c(("formatNumber"in l?l.formatNumber:r(S))(Number((null==n?void 0:n.priceImpact)||0)))+"%",1)],64))],4)):(t(),o("span",{key:1,class:"right-label flex-1",style:W({color:m(Number((null==n?void 0:n.priceImpact)||0))})},[Number(n.priceImpact)>40?(t(),o(u,{key:0},[O(">40%")],64)):(t(),o(u,{key:1},[O(c(("formatNumber"in l?l.formatNumber:r(S))(Number((null==n?void 0:n.priceImpact)||0),2))+"%",1)],64))],4)),e.selectedRouterIndex===d?(t(),p(y,{key:2,size:16,color:"#12B886"},{default:f((()=>[T(r(q))])),_:1})):(t(),p(y,{key:3,style:{opacity:"0"},size:16,color:"#12B886"},{default:f((()=>[T(r(q))])),_:1}))])],8,ta)))),128))])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-4d353c82"]]),ma={key:0},pa={key:1},fa={key:2},ka={class:"swap-info"},ba={class:"swap-info_item header"},ha={class:"header-li"},Ta={class:"header-li_left"},ya={class:"color-#80838B mr-15px"},ga=["src"],wa={style:{"font-size":"14px"}},xa=["innerHTML"],_a={class:"header-li mt-34px"},Sa={class:"header-li_left"},Ia={class:"color-80838B mr-15px"},Aa=["src"],Na={style:{"font-size":"14px"}},$a=["innerHTML"],Fa={class:"swap-info_item"},Ca={class:"swap-info_item-label"},Pa={class:"swap-info_item-value"},Ra=["innerHTML"],Ma=["innerHTML"],Ea={key:0,class:"swap-info_item"},Va={class:"swap-info_item-label"},Ua={class:"swap-info_item-value"},Ba={key:1,class:"swap-info_item"},Da={class:"swap-info_item-label"},Oa={class:"swap-info_item-value"},Ha={key:0,class:"swap-info_item"},ja={class:"swap-info_item-label"},La={class:"swap-info_item-value"},za={key:1,class:"swap-info_item"},Wa={class:"swap-info_item-label"},qa={class:"swap-info_item-value"},Xa={class:"swap-info_item"},Ka={class:"swap-info_item-label"},Za={key:0,class:"swap-info_item-value path-list"},Ga={key:0},Qa={class:"path-amm"},Ja={key:1,style:{width:"15px",margin:"0 5px 0"},src:fl,alt:"",srcset:""},Ya={key:1},en={key:0,style:{width:"15px",margin:"0 5px 0"},src:fl,alt:"",srcset:""},ln={key:1},an={key:3,class:"swap-info_item"},nn={class:"swap-info_item-label"},on={class:"swap-info_item-value"},tn=["href"],un={class:"footer"},sn={key:1,class:"swap-info center"},rn={class:"mt-20px"},dn={class:"swap-info center"},vn={class:"mt-20px"},cn={class:"footer"},mn=m(e({__name:"confirmSwap",props:{visible:{type:Boolean,default:!1},swapInfo:{type:Object,default:()=>({})},slippage:{type:String,default:"2"},loading:{type:Boolean,default:!1},chain:{type:String,default:""},nativePrice:{type:[Number,String],default:0},gasPrice:{type:String,default:"0"},activeShow:{type:Number,default:0},swapQuoteInfo:{type:Object,default:()=>({})}},emits:["update:visible","submit"],setup(e,{emit:l}){const a=e,i=l,d=A(!1),m=n({get:()=>a.visible,set(e){i("update:visible",e)}}),k=n((()=>{var e,l,n,o;const t=(null==(l=null==(e=a.swapInfo)?void 0:e.toToken)?void 0:l.decimals)||0,u=null==(n=a.swapInfo)?void 0:n.toAmount;return S(u?new X(u||0).times(100-Number(a.slippage)).div(100).toFixed():K(new X((null==(o=a.swapInfo)?void 0:o.toTokenAmount)||0).times(100-Number(a.slippage)).div(100).toFixed(0),t))})),y=n((()=>{var e,l,n,o;const t=(null==(l=null==(e=a.swapInfo)?void 0:e.fromToken)?void 0:l.decimals)||0,u=null==(n=a.swapInfo)?void 0:n.fromAmount;return S(u?new X(u||0).times(100+Number(a.slippage)).div(100).toFixed():K(new X((null==(o=a.swapInfo)?void 0:o.fromTokenAmount)||0).times(100+Number(a.slippage)).div(100).toFixed(0),t))})),w=n((()=>{var e;return(null==(e=a.swapInfo)?void 0:e.swapRouterPath)||[]}));function _(e,l){return!e||!l||isNaN(Number(e))||isNaN(Number(l))?"0":S(new X(l).div(e).toFixed())||"0"}function I(){i("submit")}function $(){m.value=!1;const e=Q(a.chain,a.swapInfo.transaction,"tx");window.open(e)}return N((()=>a.visible),(e=>{e&&(d.value=!1)})),(l,n)=>{const i=L,A=g,N=D,P=E,R=F,M=Z("copy");return t(),p(R,{modelValue:r(m),"onUpdate:modelValue":n[0]||(n[0]=e=>C(m)?m.value=e:null),width:"446px"},{header:f((()=>[1===e.activeShow?(t(),o("span",ma,c(l.$t("swap")),1)):2===e.activeShow?(t(),o("span",pa,c(l.$t("waitForConfirming")),1)):3===e.activeShow?(t(),o("span",fa,c(l.$t("tradeSubmitted")),1)):b("",!0)])),default:f((()=>{var m,g,F,C,R,E,V,U,B,D,H,j,L,W,q,Z,Y;return[1==e.activeShow?(t(),o(u,{key:0},[v("ul",ka,[v("li",ba,[v("div",ha,[v("div",Ta,[v("span",ya,c(l.$t("sell")),1),v("img",{class:"icon-token",src:("getSymbolDefaultIcon"in l?l.getSymbolDefaultIcon:r(G))({symbol:e.swapInfo.fromToken.symbol||"",logo_url:e.swapInfo.fromToken.logo_url||"",chain:e.swapInfo.fromToken.chain||a.chain||""}),alt:"",onerror:"this.src='/icon-default.png'",height:"20"},null,8,ga),v("span",wa,c(e.swapInfo.fromToken.symbol),1)]),v("div",{class:"header-li_right",innerHTML:r(S)((null==(m=e.swapInfo)?void 0:m.fromAmount)||("formatUnits"in l?l.formatUnits:r(K))(e.swapInfo.fromTokenAmount||0,e.swapInfo.fromToken.decimals))||"0"},null,8,xa)]),v("div",_a,[v("div",Sa,[v("span",Ia,c(l.$t("buy")),1),v("img",{class:"icon-token",src:("getSymbolDefaultIcon"in l?l.getSymbolDefaultIcon:r(G))({symbol:e.swapInfo.toToken.symbol||"",logo_url:e.swapInfo.toToken.logo_url||"",chain:e.swapInfo.toToken.chain||a.chain||""}),alt:"",onerror:"this.src='/icon-default.png'",height:"20"},null,8,Aa),v("span",Na,c(e.swapInfo.toToken.symbol),1)]),v("div",{class:"header-li_right",innerHTML:r(S)((null==(g=e.swapInfo)?void 0:g.toAmount)||("formatUnits"in l?l.formatUnits:r(K))(e.swapInfo.toTokenAmount||0,e.swapInfo.toToken.decimals))||"0"},null,8,$a)])]),v("li",Fa,[v("div",Ca,c(l.$t("price")),1),v("div",Pa,[v("div",{class:"p-item",innerHTML:`1 ${e.swapInfo.fromToken.symbol} = ${_((null==(F=e.swapInfo)?void 0:F.fromAmount)||("formatUnits"in l?l.formatUnits:r(K))(e.swapInfo.fromTokenAmount||0,e.swapInfo.fromToken.decimals),(null==(C=e.swapInfo)?void 0:C.toAmount)||("formatUnits"in l?l.formatUnits:r(K))(e.swapInfo.toTokenAmount||0,e.swapInfo.toToken.decimals))} ${e.swapInfo.toToken.symbol}`},null,8,Ra),v("div",{class:"p-item",innerHTML:`1 ${e.swapInfo.toToken.symbol} = ${_((null==(R=e.swapInfo)?void 0:R.toAmount)||("formatUnits"in l?l.formatUnits:r(K))(e.swapInfo.toTokenAmount||0,e.swapInfo.toToken.decimals),(null==(E=e.swapInfo)?void 0:E.fromAmount)||("formatUnits"in l?l.formatUnits:r(K))(e.swapInfo.fromTokenAmount||0,e.swapInfo.fromToken.decimals))} ${e.swapInfo.fromToken.symbol}`},null,8,Ma)])]),e.swapInfo.fromToken.isWrapper&&e.swapInfo.toToken.isETH||e.swapInfo.toToken.isWrapper&&e.swapInfo.fromToken.isETH?b("",!0):(t(),o("li",Ea,[v("div",Va,c(l.$t("slippage")),1),v("div",Ua,c(e.slippage)+"%",1)])),e.swapInfo.gasValue&&"tron"!==e.chain&&"solana"!==e.chain?(t(),o("li",Ba,[v("div",Da,c(l.$t("estimatedGas")),1),v("div",Oa,"≈ $"+c((Y=e.swapInfo.gasValue,Y&&Number(new X(Y.toString()).times(a.nativePrice).times(a.gasPrice).div(String(10**18)).toFixed(2))||"0")),1)])):b("",!0),e.swapInfo.fromToken.isWrapper&&e.swapInfo.toToken.isETH||e.swapInfo.toToken.isWrapper&&e.swapInfo.fromToken.isETH?b("",!0):(t(),o(u,{key:2},[e.swapInfo.isAmountOut?(t(),o("li",za,[v("div",Wa,c(l.$t("maximumReceived")),1),v("div",qa,c(r(y))+" "+c(null==(D=null==(B=e.swapInfo)?void 0:B.fromToken)?void 0:D.symbol),1)])):(t(),o("li",Ha,[v("div",ja,c(l.$t("minimumReceived")),1),v("div",La,c(r(k))+" "+c(null==(U=null==(V=e.swapInfo)?void 0:V.toToken)?void 0:U.symbol),1)]))],64)),v("li",Xa,[v("div",Ka,c(l.$t("tokenRoute")),1),e.swapInfo.fromToken.isWrapper&&e.swapInfo.toToken.isETH||e.swapInfo.toToken.isWrapper&&e.swapInfo.fromToken.isETH?(t(),o("div",Ya,[(t(!0),o(u,null,s(r(w),((e,l)=>(t(),o(u,{key:l},[0!==l?(t(),o("img",en)):b("",!0),e.symbol?(t(),o("span",ln,c(e.symbol),1)):b("",!0)],64)))),128))])):(t(),o("div",Za,[(t(!0),o(u,null,s(r(w),((e,a)=>(t(),o(u,{key:a},[e.symbol?(t(),o("span",Ga,c(e.symbol),1)):b("",!0),v("div",Qa,[e.nextAmm&&"unknown"!==e.nextAmm?(t(),p(i,{key:0,src:("formatIconSwap"in l?l.formatIconSwap:r(z))(e.nextAmm),style:{width:"14px",height:"14px","border-radius":"10px","margin-bottom":"3px"}},{error:f((()=>n[1]||(n[1]=[v("img",{style:{width:"14px","border-radius":"10px"},src:il},null,-1)]))),placeholder:f((()=>n[2]||(n[2]=[v("img",{style:{width:"14px","border-radius":"10px"},src:il},null,-1)]))),_:2},1032,["src"])):b("",!0),a!==r(w).length-1?(t(),o("img",Ja)):b("",!0)])],64)))),128))]))]),(null==(H=e.swapInfo)?void 0:H.transaction)?(t(),o("li",an,[v("div",nn,c(l.$t("txHash")),1),v("div",on,[v("a",{href:("formatExplorerUrl"in l?l.formatExplorerUrl:r(Q))(e.chain,e.swapInfo.transaction,"tx"),target:"_blank"},c((null==(L=null==(j=e.swapInfo)?void 0:j.transaction)?void 0:L.slice(0,6))+"..."+(null==(q=null==(W=e.swapInfo)?void 0:W.transaction)?void 0:q.slice(-6))),9,tn),h(T(A,{name:"bxs:copy",class:"clickable ml-5px"},null,512),[[M,null==(Z=e.swapInfo)?void 0:Z.transaction]])])])):b("",!0)]),v("div",un,[T(N,{class:"swap-button w-full",type:"primary",size:"large",loading:e.loading,"loading-text":l.$t("confirming"),block:"",disabled:r(d),onClick:x(I,["stop"])},{default:f((()=>[O(c(l.$t("confirm")),1)])),_:1},8,["loading","loading-text","disabled"])])],64)):2===e.activeShow?(t(),o("div",sn,[T(P,{size:110,color:"#747782",style:{animation:"rotating 2s linear infinite normal"}},{default:f((()=>[T(r(J))])),_:1}),v("span",rn,c(l.$t("plsConfirmWallet")),1)])):3===e.activeShow?(t(),o(u,{key:2},[v("div",dn,[T(A,{name:"lineicons:arrow-up-circle",class:"text-110px"}),v("span",vn,c(l.$t("plsViewBlockChainExplorer")),1)]),v("div",cn,[T(N,{class:"swap-button w-full",type:"primary",size:"large",block:"",onClick:x($,["stop"])},{default:f((()=>[O(c(l.$t("viewTransition")),1)])),_:1})])],64)):b("",!0)]})),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-ea1165d0"]]),pn=Y("swap",(()=>{const e=ee("swap_token1",{address:"",symbol:"",logo_url:"",chain:"",balance:0,decimals:0}),a=ee("swap_token2",{address:"",symbol:"",logo_url:"",chain:"",balance:0,decimals:0}),o=l(),t=le(),u=ae(0),s=A(2),i=n((()=>0===u.value?a.value:e.value)),r=n((()=>0===u.value?e.value:a.value)),v=A(t.tokenInfo),c=A(t.tokenInfoExtra),m=ne(),p=n((()=>o.chain||oe(m.params.id).chain||"")),f=A([]),k=n((()=>{var e,l,a,n,o,t;const u=[...(null==(l=null==(e=f.value)?void 0:e.slice)?void 0:l.call(e))||[]];return(null==(a=null==u?void 0:u[0])?void 0:a.chain)&&(null==(n=null==u?void 0:u[0])?void 0:n.chain)!==(null==(t=null==(o=h.value)?void 0:o[0])?void 0:t.chain)?u:(h.value.slice().forEach((e=>{const l=u.find((l=>l.token+"-"+l.chain==e.token+"-"+e.chain));l?l.logo_url=e.logo_url:u.push({...e,value:0})})),u.length>0?u:h.value.slice())})),b=A("0"),h=ae([]),T=A(!1),y=A(!1),g=A(!1),w=A(!1),x=A(!1),I=A(0),N=A(!1),$=A(!1),F=A(""),C=A(0),P=A(""),R=A("");function M(){const a=l();if(e.value.chain===a.chain)return te({tokenAddress:e.value.address,chain:a.chain,spender:ue(a.chain)}).then((async l=>{var a,n;if(null==l?void 0:l.address)return e.value={...e.value,...l},1===u.value&&(b.value=e.value.allowance||"0"),f.value=null==(n=null==(a=f.value)?void 0:a.map)?void 0:n.call(a,(a=>(a.token===e.value.address&&(a={...a,...l,value:l.balance}),a))),l}))}function E(){const e=l();if(a.value.chain===e.chain)return te({tokenAddress:a.value.address,chain:e.chain,spender:ue(e.chain)}).then((async e=>{var l,n;if(null==e?void 0:e.address)return a.value={...a.value,...e},0===u.value&&(b.value=a.value.allowance||"0"),f.value=null==(n=null==(l=f.value)?void 0:l.map)?void 0:n.call(l,(l=>(l.token===a.value.address&&(l={...l,...e,value:e.balance}),l))),e}))}function V(){M(),E()}function U(){const e=l(),a=e.chain,n=e.address;n&&a&&se().then((e=>{var l,o,t,u;f.value="solana"===a||"ton"===a||"sui"===a?null==(l=null==e?void 0:e.map)?void 0:l.call(e,(e=>({...e}))):null==(u=(null==(t=null==(o=null==e?void 0:e.map((e=>({...e,id:e.token+"-"+e.chain,address:e.token}))))?void 0:o.filter)?void 0:t.call(o,(e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag)))||[])?void 0:u.filter((e=>!!Number(e.value))),f.value.length>0&&"solana"!==a&&"sui"!==a&&"ton"!==a&&(/^0x[0-9a-zA-Z]{40}$/.test(n)||ie(n,"tron"))&&re(f.value.map((e=>e.token||"")),a).then((e=>{var l,a,n;f.value=null==(n=null==(a=null==(l=f.value)?void 0:l.map)?void 0:a.call(l,((l,a)=>({...l,value:K(e[a],(null==l?void 0:l.decimals)||0)}))))?void 0:n.filter((e=>!!Number(e.value)))}))}))}function B(l,n){var o,u,s,i;let r=e.value.address,p=e.value.chain;if(!r||!p)return;const f=r+"-"+p;if(e.value.address&&(r=e.value.address),e.value.chain&&(p=e.value.chain),e.value.address===(null==(o=t.token)?void 0:o.token)&&(v.value={...t.tokenInfo},e.value={...e.value,address:(null==(s=null==(u=v.value)?void 0:u.token)?void 0:s.token)||"",...null==(i=v.value)?void 0:i.token}),r&&p){let o=r+"-"+p;const t=d(p),u=null==t?void 0:t.wmain_wrapper,s=null==t?void 0:t.main_name;r===_&&p&&u&&(o=u+"-"+p);const i=de(o).then((async n=>{var o,t,u,i,d,c,f,k,b,g,A,M,E,V,U,B,D,O,H,j;const L=n||{};v.value={...L,...r===_?{token:{...(null==n?void 0:n.token)||{},token:r,symbol:s}}:{}},e.value={...e.value,address:(null==(t=null==(o=v.value)?void 0:o.token)?void 0:t.token)||"",...null==(u=v.value)?void 0:u.token},"solana"===p?C.value=(null==(i=v.value)?void 0:i.token.current_price_usd)?S(v.value.token.current_price_usd):"":(P.value=(null==(d=v.value)?void 0:d.token.current_price_usd)?S(null==(f=null==(c=v.value)?void 0:c.token)?void 0:f.current_price_usd):"",R.value=(null==(k=v.value)?void 0:k.token.current_price_usd)?S(null==(g=null==(b=v.value)?void 0:b.token)?void 0:g.current_price_usd):"");const z=null==(A=null==n?void 0:n.pairs)?void 0:A[0],W=null==z?void 0:z.pair;if(!W||"moonshot"===(null==z?void 0:z.amm)||(null==(M=null==z?void 0:z.amm)?void 0:M.includes("fourmeme"))||"flapswap"===(null==z?void 0:z.amm)||"sunpump"===(null==z?void 0:z.amm)||"dyorswapfun"===(null==z?void 0:z.amm)||(null==z?void 0:z.target_token)!==W&&!new RegExp(null==z?void 0:z.target_token,"i").test(W))T.value=!1;else if(T.value=!0,a.value.address!==_&&(null==(E=h.value)?void 0:E.length)>0){const e={...null==(U=null==(V=h.value)?void 0:V.slice())?void 0:U.find((e=>e.address===_))};a.value={...e},setTimeout((()=>{l&&l(a.value)}),1e3)}(null==(B=null==z?void 0:z.amm)?void 0:B.includes("fourmeme"))?w.value=!0:w.value=!1,"dyorswapfun"===(null==z?void 0:z.amm)&&(null==(O=null==(D=["xlayer","gatelayer"])?void 0:D.includes)?void 0:O.call(D,null==z?void 0:z.chain))?N.value=!0:N.value=!1,"xflapswap"===(null==z?void 0:z.amm)&&"xlayer"===(null==z?void 0:z.chain)?$.value=!0:$.value=!1,"flapswap"===(null==z?void 0:z.amm)?x.value=!0:x.value=!1;const q=["TPeoxx1VhUMnAUyjwWfximDYFDQaxNQQ45","TXL6rJbvmjD46zeN1JssfgxvSo99qC8MRT","TAwAg9wtQzTMFsijnSFotJrpxhMm3AqW1d"];return"sunpump"===(null==z?void 0:z.amm)?I.value=1:(null==(H=null==n?void 0:n.pairs)?void 0:H.some((e=>"sunpump"===e.amm)))||(null==(j=null==q?void 0:q.includes)?void 0:j.call(q,r))?I.value=2:I.value=0,F.value=(null==z?void 0:z.amm)||"",function(l){return new Promise((n=>{var o;const t=(null==(o=m.params)?void 0:o.id)||"";let[u,s]=oe(t,1);e.value.address&&(u=e.value.address),e.value.chain&&(s=e.value.chain),u&&"solana"===s?ce(u).then((e=>{var o,t,u;if(!1===(null==e?void 0:e.completed)){if("So11111111111111111111111111111111111111112"!==a.value.address&&(null==(o=h.value)?void 0:o.length)>0){const e={...null==(u=null==(t=h.value)?void 0:t.slice())?void 0:u.find((e=>"So11111111111111111111111111111111111111112"===e.address))};a.value={...e},setTimeout((()=>{l&&l(e)}),1e3)}n(!0)}else y.value=!1,n(!1)})):(y.value=!1,n(!1))}))}(l).catch((async()=>!1)),n})),k=ve(f).then((async e=>(c.value={...e,buy_tax:Number(Number((null==e?void 0:e.buy_tax)||0).toFixed(2)),sell_tax:Number(Number((null==e?void 0:e.sell_tax)||0).toFixed(2))},n&&n(),e)));Promise.all([i,k]).finally((()=>{}))}}return{token1:e,token2:a,chain:p,fromToken:i,toToken:r,baseToken:v,baseTokenExtra:c,allowance:b,activeTab:u,swapType:s,isFourMeme:w,isFlap:x,isPump:y,isMoonshot:g,isERC314:T,isSunPump:I,isDyorswapfun:N,isXflapswap:$,userBalanceTokens:f,getTokenDetails:V,getToken2Info:E,getToken1Info:M,getBaseToken:B,swapTokens:k,init:function(){var l;const[n,t]=oe(null==(l=m.params)?void 0:l.id,1),u=o.chain;n&&n!==e.value.address&&(e.value={address:n||"",chain:t||"",balance:0,symbol:"",decimals:0,logo_url:""}),u===a.value.chain&&a.value.address||(a.value={address:"",chain:u||"",balance:0,symbol:"",decimals:0,logo_url:""}),function(){const l=o.chain||oe(m.params.id).chain||"";me().then((n=>{var o,t,u,s,i,r,d,v;h.value=(null==n?void 0:n.map((e=>({...e,id:e.token+"-"+e.chain,address:e.token,decimals:e.token===_&&"solana"===l?9:e.decimals}))))||[],"solana"===l&&(h.value=null==(t=null==(o=h.value)?void 0:o.filter)?void 0:t.call(o,(e=>e.token!==_)).sort((e=>"So11111111111111111111111111111111111111112"===e.token?-1:1))),"sui"===l&&(h.value=null==(r=null==(i=null==(s=null==(u=h.value)?void 0:u.filter)?void 0:s.call(u,(e=>e.token!==_)))?void 0:i.map)?void 0:r.call(i,(e=>({...e,token:"0x2::sui::SUI"===e.token?_:e.token,address:"0x2::sui::SUI"===e.token?_:e.token}))).sort((e=>e.token===_?-1:1)));const c=e.value.address===a.value.address,m=(T.value||w.value||x.value||I.value>0||N.value||$.value)&&a.value.address!==_,p=(y.value||g.value)&&"solana"===l&&"So11111111111111111111111111111111111111112"===a.value.address,f="sui"===l&&"0x2::sui::SUI"!==a.value.address&&a.value.address!==_;if((!a.value.address||c||a.value.chain!==l||m||p||f)&&h.value.length>0){let l=h.value.findIndex((e=>/USDT/.test(e.symbol)));l=l<0?h.value.findIndex((e=>/USD/.test(e.symbol))):l,l=l<0?0:l;let n=h.value[l];if(e.value.address===n.address&&(n=0===l?h.value[1]??h.value[0]:h.value[0]),T.value||y.value||g.value||w.value||x.value||I.value>0||f||N.value||$.value){const e=null==(v=null==(d=h.value)?void 0:d.slice)?void 0:v.call(d).find((e=>e.address===_||"So11111111111111111111111111111111111111112"===e.address||"0x2::sui::SUI"===e.address));e&&(a.value={...e})}else a.value={...n}}}))}(),U(),me(),B(),V()},getUserTokenList:U}})),fn={key:0,class:"gap"},kn=["onClick"],bn={class:"text"},hn=m(e({__name:"percentStep",props:{activeColor:{type:String,default:""}},emits:["change"],setup(e,{expose:l,emit:a}){const n=a,d=A(0),m=[25,50,75,100],p=(e,l=!1)=>{e===d.value?(d.value=0,n("change",0,l)):(d.value=e,n("change",e,l))};return l({handleClick:p}),(l,a)=>(t(),o("div",{class:"percent-container",style:W({"--percent-active-color":e.activeColor})},[v("div",{for:"percent-radio-0",class:i({active:0===r(d)})},null,2),(t(),o(u,null,s(m,((e,l)=>(t(),o(u,{key:l},[0!==l?(t(),o("div",fn)):b("",!0),v("div",{class:i(["label",{active:e===r(d)}]),onClick:x((l=>p(e)),["stop"])},[a[0]||(a[0]=v("div",{class:"bar"},null,-1)),v("div",bn,c(e)+"%",1)],10,kn)],64)))),64))],4))}}),[["__scopeId","data-v-9ac60cd3"]]),Tn={class:"card-container mt-10px"},yn={class:"flex items-center"},gn=["innerHTML"],wn={class:"flex justify-between items-center mt-10px"},xn={class:"card-container bottom mt-10px"},_n={class:"flex items-center"},Sn=["innerHTML"],In={class:"flex justify-between items-center mt-10px"},An={key:0},Nn={key:1},$n=["innerHTML"],Fn={class:"swap-label"},Cn={class:"slippage-container"},Pn={class:"swap-label_item-left"},Rn={style:{display:"flex","align-items":"center"}},Mn={class:"swap-label_item-left"},En={class:"swap-label_item-left"},Vn={key:0},Un={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:fl,alt:"",srcset:""},Bn={key:1},Dn={key:1,class:"path-list"},On={key:0},Hn={key:1,class:"path-amm"},jn=["src"],Ln={key:2},zn={key:0,style:{width:"15px",margin:"1px 5px 0"},src:fl,alt:"",srcset:""},Wn={key:1},qn={key:0},Xn={key:1,class:"path-amm"},Kn=["src"],Zn={key:0,class:"select-token iconfont icon-collapse-down"},Gn={key:0},Qn={class:"swap-label_item-left"},Jn="2",Yn=m(e({__name:"market",setup(e){const{t:i}=a(),m=k(),y=pn(),w=le(),I=l(),$=A(!1),F=A(!1),R=A(!1),M=n((()=>y.chain)),E=A(!1),V=A(!1),U=A(Jn),B=pe("swapSlippage","auto"),L=pe("solanaSlippage","9"),z=pe("suiTonSlippage","2"),q=A(!1),Z=A(!1),G=A(!1),Q=fe("percentStepInf"),J=A([]),Y=A(!1),ee=A(0),oe=A(0),te=A(0),se=A([0,0]),ie=A(!1),re=A({fromToken:{symbol:"",decimals:18,address:"",logo_url:""},toToken:{symbol:"",decimals:18,address:"",logo_url:""},gasValue:"0",swapRouterPath:[],isAmountOut:!1});let de={},ve={},ce={};const me=A("0"),Qe=A("0"),Je=n((()=>{const e=re.value.gasValue;if(!e)return"0";const l=me.value,a=Qe.value;return S(new X(e.toString()).times(a).times(l).div(String(10**18)).toFixed()||"0",2)})),Ye=A({}),el=n((()=>"auto"===B.value?U.value:B.value)),ll=n((()=>{if(["solana","ton","sui"].includes(y.chain)||y.fromToken.address===_)return!0;if(!y.allowance)return!1;const e=y.fromToken.decimals||0;return ke(new X(pl.value||0).toFixed(Number(e)||0),e).lte(y.allowance)})),al=n((()=>{if(!Number(pl.value)&&!Number(kl.value))return"";const e=y.chain;if("solana"===e)return new X(ee.value||0);if("sui"===e)return new X(oe.value||0);if("ton"===e)return new X(te.value||0);const l=il.value.routerPath,a=(null==l?void 0:l.length)>0?null==l?void 0:l[0]:il.value.fromToken||null,n=(null==l?void 0:l.length)>0?null==l?void 0:l[l.length-1]:il.value.toToken||null;if(a&&n){const e=il.value.from_price||0,l=il.value.to_price||0,o=K(a.amount,a.decimals),t=K(n.amount,n.decimals);return new X(o).times(e).div(new X(t).times(l)).minus(1).abs()}return""})),nl=n((()=>al.value?S(al.value.times(100).toFixed(),2)+"%":"")),ol=n((()=>{var e,l,a,n,o,t;return""===al.value?"":(null==(l=null==(e=al.value)?void 0:e.gt)?void 0:l.call(e,.4))?"#F81111":(null==(n=null==(a=al.value)?void 0:a.gt)?void 0:n.call(a,.1))?"#F7933F":(null==(t=null==(o=al.value)?void 0:o.gt)?void 0:t.call(o,.05))?"#f8be46":""})),tl=n((()=>{var e,l,a,n;if(!I.address||!I.provider)return"#999";if(""!==al.value){if(null==(l=null==(e=al.value)?void 0:e.gt)?void 0:l.call(e,.4))return"#999";if(null==(n=null==(a=al.value)?void 0:a.gt)?void 0:n.call(a,.1))return"#F7933F"}return 0===y.activeTab?be[0]:1===y.activeTab?he[0]:"#558BED"})),ul=n((()=>{var e,l,a,n,o,t,u;const s=(null==(e=il.value)?void 0:e.totalTax)||((null==(l=il.value)?void 0:l.total_sell_tax)||0)+((null==(a=il.value)?void 0:a.total_buy_tax)||0);return s>0?`(${i("tax")}: ${S(s,1)}%)`:0===y.activeTab&&((null==(n=y.baseTokenExtra)?void 0:n.buy_tax)||0)>0?`(${i("tax")}: ${S((null==(o=y.baseTokenExtra)?void 0:o.buy_tax)||0,1)}%)`:1===y.activeTab&&((null==(t=y.baseTokenExtra)?void 0:t.sell_tax)||0)>0?`(${i("tax")}: ${S((null==(u=y.baseTokenExtra)?void 0:u.sell_tax)||0,1)}%)`:""})),sl=ae([]),il=A({fromToken:{symbol:"",decimals:18,amount:"",address:""},toToken:{symbol:"",decimals:18,amount:"",address:""},fromAmount:"",isAmountOut:!1,isSunPump:0}),vl=A([]),cl=ne();N((()=>cl.params.id),(()=>{pl.value="",kl.value=""}));const ml=A(0),pl=A(""),kl=A(""),bl=A(0),hl=A(!1),Tl=n((()=>{var e,l,a,n,o,t,u,s,i;const r=(null==(l=null==(e=null==w?void 0:w.pairs)?void 0:e[0])?void 0:l.amm)&&(null==(o=["fourmeme","fourmemev2"])?void 0:o.includes(null==(n=null==(a=null==w?void 0:w.pairs)?void 0:a[0])?void 0:n.amm)),d=(null==(u=null==(t=null==w?void 0:w.pairs)?void 0:t[0])?void 0:u.amm)&&["viridian","aerodrome","flapswap"].includes(null==(i=null==(s=null==w?void 0:w.pairs)?void 0:s[0])?void 0:i.amm);return"ton"===y.chain||"sui"===y.chain||d||r||y.isDyorswapfun||y.isXflapswap})),yl=n((()=>{var e,l,a;if("ton"===M.value){const n=(null==ce?void 0:ce.totalTransferAmount)||0,o=(null==(a=null==(l=null==(e=y.userBalanceTokens)?void 0:e.find)?void 0:l.call(e,(e=>e.address===_)))?void 0:a.initBalance)||0;if(n&&new X(n).gt(o))return!0}return!1})),{reset:gl,start:wl}=Te(15,{immediate:!0,onComplete:()=>{!function(){if(2!==y.swapType||y.token1.address===y.token2.address)return;if(ie.value||V.value||"hidden"===document.visibilityState)return void xl();R.value?$l():Fl();xl()}()}});function xl(){gl(15),wl()}function _l(){xl(),hl.value&&ll.value&&!ie.value&&ql(!1)}function Sl(){sl.value=[],il.value.totalTax=0,il.value.total_sell_tax=0,il.value.total_buy_tax=0,U.value=Jn,ml.value=0,pl.value="",kl.value="",y.getToken1Info(),y.getBaseToken(Il,Hl)}function Il(){sl.value=[],il.value.totalTax=0,il.value.total_sell_tax=0,il.value.total_buy_tax=0,U.value=Jn,ml.value=0,pl.value="",kl.value="",y.getToken2Info()}function Al(){var e,l;const a=y.chain;if("solana"!==a){if(a&&a===y.fromToken.chain&&y.fromToken.address){let n=y.isFourMeme?null==(l=null==(e=il.value)?void 0:e.quoteResult)?void 0:l.tokenManager:ue(a);const o=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][y.isSunPump];n=o||n,"xlayer"===a&&y.isDyorswapfun&&(n="0xfd947a61e2c54413031ddb1f754dbe0e696efa09"),"xlayer"===a&&y.isXflapswap&&(n="0xb30d8c4216e1f21f27444d2ffaee3ad577808678"),"gatelayer"===a&&y.isDyorswapfun&&(n="0xC5d6974951201FB5f20C0efB4B6BEF5cf8FF1617"),$.value=!0,we(y.fromToken.address,n).then((e=>{y.allowance=e.toString()})).finally((()=>{$.value=!1}))}}else y.allowance=ge}function Nl(e,l=!1){var a,n,o,t;if(l)return;const u=Number(e)/100;let s=y.fromToken.balance||0;if(u){const e=y.fromToken.decimals||0;if((null==(a=y.fromToken)?void 0:a.address)===_||"So11111111111111111111111111111111111111112"===(null==(n=y.fromToken)?void 0:n.address)){const l=y.fromToken.chain,a=xe[l]||.01;if(new X(s).lt(a))return void H.alert(i("balanceNotEnough",{n:a,s:y.fromToken.symbol}),i("tips"));s=(null==(o=new X(s).minus(a).times(u).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`)))?void 0:o[0])||""}else s=(null==(t=new X(s).times(u).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`)))?void 0:t[0])||"";0===Number(s)&&(s="")}else s="";pl.value!==s&&(pl.value=Number(s)<0?"0":s,$l())}function $l(){if(F.value&&!R.value)return;const e=pl.value,l=Number(e);""===e||"."===e?(pl.value="",kl.value="",F.value=!1):0===l&&0!==Number(kl.value)?(kl.value="0",F.value=!1):l&&(R.value=!0,kl.value="",Pl())}function Fl(){if(F.value&&!R.value)return;const e=kl.value,l=Number(e);""===e||"."===e?(pl.value="",kl.value="",F.value=!1):0===l&&0!==Number(pl.value)?(pl.value="0",F.value=!1):l&&(R.value=!1,pl.value="",Pl(!1))}let Cl=null;function Pl(e=!0){Ol()&&(Number(pl.value)||Number(kl.value)?y.token1.address!==y.token2.address&&(Cl&&(clearTimeout(Cl),Cl=null),Cl=setTimeout((()=>{!async function(e,l){var a,n,o,t,u,s,i,r,d,v,c,m,p,f,k,b,h,T,g,w,x,S,A,N,$,C,P,R,M,V,U,B,D,O,H,j,W,q,Z,G,Q,J,Y,ee,le,ae,ne,oe,te,ue,se,ie,me,pe,fe,be,he,Te,ye,ge;if((pl.value||kl.value)&&y.fromToken.address&&y.toToken.address&&l===y.fromToken.chain){const xe=y.fromToken.decimals,He=y.toToken.decimals;if("sui"===l)return void async function(e,l){var a,n,o;if("sui"===l){const l=y.fromToken.decimals||(null==(a=y.fromToken)?void 0:a.decimal),t=y.toToken.decimals||(null==(n=y.toToken)?void 0:n.decimal),u=y.fromToken.address===_?new X(pl.value||0).times("0.997"):new X(pl.value||0),s={tokenIn:y.fromToken.address===_?"0x2::sui::SUI":y.fromToken.address,tokenOut:y.toToken.address,amountIn:ke((null==(o=u.toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${l}})?`)))?void 0:o[0])||0,l).toFixed(0),slippage:new X(z.value).div(100).toNumber()};F.value=!0,Pe(s).then((l=>{var a,n;return l.returnAmount&&l.returnAmountWithDecimal||l.amount_out?(de=l,e&&(kl.value=(null==l?void 0:l.returnAmount)||K((null==l?void 0:l.amount_out)||"0",(null==(a=null==l?void 0:l.to_token)?void 0:a.decimals)||t||(null==(n=y.toToken)?void 0:n.decimals))),Ml()):Ie("can not get quote"),ql(!1),F.value=!1,l})).catch((e=>(Ie((null==e?void 0:e.error)||e),Promise.resolve("")))).finally((()=>{setTimeout((()=>{F.value=!1,_l()}),800)}))}}(e,l);if("solana"===l)return void function(e,l){var a,n;if("solana"===l){if(!!((y.isPump||y.isMoonshot)&&"So11111111111111111111111111111111111111112"!==y.token2.address&&"solana"===y.token2.chain))return;const l=y.fromToken.decimals,o=y.toToken.decimals,t={inputMint:y.fromToken.address,inputDecimals:l,inputMintSymbol:y.fromToken.symbol,inputMintName:y.fromToken.symbol,inputAmount:pl.value||0,outputMint:y.toToken.address,outputDecimals:o,outputMintSymbol:y.toToken.symbol,outputMintName:y.toToken.symbol,amount:e?ke((null==(a=new X(pl.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${l}})?`)))?void 0:a[0])||0,l).toFixed(0):ke((null==(n=new X(kl.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`)))?void 0:n[0])||0,o).toFixed(0),slippageBps:new X(L.value).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:L.value||9,isPump:y.isPump,isMoonshot:y.isMoonshot};if(Rl.amount&&Object.keys(Rl).every((e=>t[e]===Rl[e])))return;Rl={...t},setTimeout((()=>{Rl={}}),15e3),F.value=!0,Me(t).then((a=>{var n,t,u,s,i;return a.routeInfo&&a.transaction?(ve=a,kl.value=(null==(u=null==(t=null==(n=a.routeInfo)?void 0:n.amountOut)?void 0:t.amount)?void 0:u.toFixed())||"0",Ml()):e?a.outAmount?(ve=a,kl.value=K(a.outAmount||"0",o||(null==(s=y.toToken)?void 0:s.decimals)),Ml()):Ie("can not get quote"):a.inAmount?(ve=a,pl.value=K(a.inAmount||"0",l||(null==(i=y.fromToken)?void 0:i.decimals)),Ml()):Ie("can not get quote"),ql(!1),a})).catch((e=>(Ie((null==e?void 0:e.error)||e),Promise.resolve("")))).finally((()=>{setTimeout((()=>{F.value=!1,Rl={},_l()}),800)}))}}(e,l);if("bsc"===l){if(!!((y.isFourMeme||y.isFlap)&&y.token2.address!==_&&"bsc"===y.token2.chain))return}if("tron"===l){if(!!(y.isSunPump>0&&y.token2.address!==_&&"tron"===y.token2.chain))return}if("xlayer"===l){if(!!((y.isDyorswapfun||y.isXflapswap)&&y.token2.address!==_&&"xlayer"===y.token2.chain))return}if("ton"===l)return void async function(e,l){var a,n,o;if("ton"===l){const l=y.fromToken.decimals||(null==(a=y.fromToken)?void 0:a.decimal),t=y.toToken.decimals||(null==(n=y.toToken)?void 0:n.decimal),u=y.fromToken.address===_?new X(pl.value||0).times("0.997"):new X(pl.value||0),s={inputToken:y.fromToken.address,outputToken:y.toToken.address,inputTokenAmount:ke((null==(o=u.toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${l}})?`)))?void 0:o[0])||0,l).toFixed(0),slippageBps:new X(z.value).times(100).toFixed(0)};F.value=!0,Re(s).then((l=>{var a;return l.amountOut&&l.payload?(ce=l,e&&(kl.value=K(l.amountOut||"0",t||(null==(a=y.toToken)?void 0:a.decimals))),Ml()):Ie("can not get quote"),ql(!1),F.value=!1,l})).catch((e=>(Ie((null==e?void 0:e.error)||e),Promise.resolve("")))).finally((()=>{setTimeout((()=>{F.value=!1,_l()}),800)}))}}(e,l);F.value=!0;const je={from_token:y.fromToken.address,to_token:y.toToken.address,amountIn:e?ke((null==(a=new X(pl.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${xe}})?`)))?void 0:a[0])||0,xe).toFixed(0):"0",amountOut:e?"0":ke((null==(n=new X(kl.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${He}})?`)))?void 0:n[0])||0,He).toFixed(0)};if(y.isFourMeme){try{const a=await _e(je,l);e?kl.value=K((null==a?void 0:a.amountOut)||"0",null==(o=y.toToken)?void 0:o.decimals):pl.value=K((null==a?void 0:a.amountIn)||"0",null==(t=y.fromToken)?void 0:t.decimals),sl.value=[{symbol:null==(u=y.fromToken)?void 0:u.symbol,nextAmm:"fourmeme"},{symbol:null==(s=y.toToken)?void 0:s.symbol,nextAmm:""}],il.value.fromAmount=ke(pl.value,null==(i=y.fromToken)?void 0:i.decimals).toFixed(0),il.value.toAmount=ke(kl.value,null==(r=y.toToken)?void 0:r.decimals).toFixed(0),il.value.fromToken={...y.fromToken,amount:il.value.fromAmount},il.value.toToken={...y.toToken,amount:il.value.toAmount},il.value.quoteResult={...a},il.value.isAmountOut=!e,il.value.isFourMeme=!0,Al();const[n,p]=[(null==(d=y.fromToken)?void 0:d.address)+"-"+(null==(v=y.fromToken)?void 0:v.chain),(null==(c=y.toToken)?void 0:c.address)+"-"+(null==(m=y.toToken)?void 0:m.chain)];Se([n,p]).then((async e=>{var l,a;il.value.from_price=(null==(l=null==e?void 0:e[0])?void 0:l.current_price_usd)||0,il.value.to_price=(null==(a=null==e?void 0:e[1])?void 0:a.current_price_usd)||0,il.value.isFourMeme=!0})),F.value=!1}catch(we){F.value=!1,Ie(we)}return}if(y.isDyorswapfun){try{const[a,n]=[(null==(p=y.fromToken)?void 0:p.address)+"-"+(null==(f=y.fromToken)?void 0:f.chain),(null==(k=y.toToken)?void 0:k.address)+"-"+(null==(b=y.toToken)?void 0:b.chain)],o=await Se([a,n]),t=(null==(h=null==o?void 0:o[0])?void 0:h.current_price_usd)||0,u=(null==(T=null==o?void 0:o[1])?void 0:T.current_price_usd)||0,s=Ae({...je,from_price:t,to_price:u,pairs:(null==(g=y.baseToken)?void 0:g.pairs)||[]},l);kl.value=K(s||"0",null==(w=y.toToken)?void 0:w.decimals),sl.value=[{symbol:null==(x=y.fromToken)?void 0:x.symbol,nextAmm:"dyorswapfun"},{symbol:null==(S=y.toToken)?void 0:S.symbol,nextAmm:""}],il.value.fromAmount=ke(pl.value,null==(A=y.fromToken)?void 0:A.decimals).toFixed(0),il.value.toAmount=ke(kl.value,null==(N=y.toToken)?void 0:N.decimals).toFixed(0),il.value.fromToken={...y.fromToken,amount:il.value.fromAmount},il.value.toToken={...y.toToken,amount:il.value.toAmount},il.value.isAmountOut=!e,il.value.isDyorswapfun=!0,Al(),il.value.from_price=t,il.value.to_price=u,F.value=!1}catch(we){F.value=!1,Ie(we)}return}if(y.isXflapswap){try{const a=await Ne(je,l);e?kl.value=K((null==a?void 0:a.toString())||"0",null==($=y.toToken)?void 0:$.decimals):pl.value=K((null==a?void 0:a.toString())||"0",null==(C=y.fromToken)?void 0:C.decimals),sl.value=[{symbol:null==(P=y.fromToken)?void 0:P.symbol,nextAmm:"xflapswap"},{symbol:null==(R=y.toToken)?void 0:R.symbol,nextAmm:""}],il.value.fromAmount=ke(pl.value,null==(M=y.fromToken)?void 0:M.decimals).toFixed(0),il.value.toAmount=ke(kl.value,null==(V=y.toToken)?void 0:V.decimals).toFixed(0),il.value.fromToken={...y.fromToken,amount:il.value.fromAmount},il.value.toToken={...y.toToken,amount:il.value.toAmount},il.value.quoteResult={...a},il.value.isAmountOut=!e,il.value.isXflapswap=!0,Al();const[n,o]=[(null==(U=y.fromToken)?void 0:U.address)+"-"+(null==(B=y.fromToken)?void 0:B.chain),(null==(D=y.toToken)?void 0:D.address)+"-"+(null==(O=y.toToken)?void 0:O.chain)];Se([n,o]).then((async e=>{var l,a;il.value.from_price=(null==(l=null==e?void 0:e[0])?void 0:l.current_price_usd)||0,il.value.to_price=(null==(a=null==e?void 0:e[1])?void 0:a.current_price_usd)||0,il.value.isXflapswap=!0})),F.value=!1}catch(we){F.value=!1,Ie(we)}return}if("tron"===l&&y.isSunPump>0){try{const a=await $e({...je,isSunPump:y.isSunPump},l);e?kl.value=K((null==a?void 0:a.amountOut)||"0",null==(H=y.toToken)?void 0:H.decimals):pl.value=K((null==a?void 0:a.amountIn)||"0",null==(j=y.fromToken)?void 0:j.decimals),sl.value=[{symbol:null==(W=y.fromToken)?void 0:W.symbol,nextAmm:"sunpump"},{symbol:null==(q=y.toToken)?void 0:q.symbol,nextAmm:""}],il.value.fromAmount=ke(pl.value,null==(Z=y.fromToken)?void 0:Z.decimals).toFixed(0),il.value.toAmount=ke(kl.value,null==(G=y.toToken)?void 0:G.decimals).toFixed(0),il.value.fromToken={...y.fromToken,amount:il.value.fromAmount},il.value.toToken={...y.toToken,amount:il.value.toAmount},il.value.quoteResult={...a},il.value.isAmountOut=!e,il.value.isSunPump=y.isSunPump,Al();const[n,o]=[(null==(Q=y.fromToken)?void 0:Q.address)+"-"+(null==(J=y.fromToken)?void 0:J.chain),(null==(Y=y.toToken)?void 0:Y.address)+"-"+(null==(ee=y.toToken)?void 0:ee.chain)];Se([n,o]).then((async e=>{var l,a;il.value.from_price=(null==(l=null==e?void 0:e[0])?void 0:l.current_price_usd)||0,il.value.to_price=(null==(a=null==e?void 0:e[1])?void 0:a.current_price_usd)||0,il.value.isSunPump=y.isSunPump})),F.value=!1}catch(we){F.value=!1,Ie(we)}return}const Le=null==(le=y.baseToken)?void 0:le.pairs;if((null==(ae=null==Le?void 0:Le[0])?void 0:ae.target_token)===(null==(ne=null==Le?void 0:Le[0])?void 0:ne.pair)&&(null==(oe=null==Le?void 0:Le[0])?void 0:oe.pair)&&"xlayer"!==l){const a=await Fe(je,l);if(a){e?kl.value=K(a||"0",null==(te=y.toToken)?void 0:te.decimals):pl.value=K(a||"0",null==(ue=y.fromToken)?void 0:ue.decimals),y.isERC314=!0,sl.value=[{symbol:null==(se=y.fromToken)?void 0:se.symbol,nextAmm:null==(ie=null==Le?void 0:Le[0])?void 0:ie.amm},{symbol:null==(me=y.toToken)?void 0:me.symbol,nextAmm:""}],il.value.fromAmount=ke(pl.value,null==(pe=y.fromToken)?void 0:pe.decimals).toFixed(0),il.value.toAmount=ke(kl.value,null==(fe=y.toToken)?void 0:fe.decimals).toFixed(0),il.value.fromToken={...y.fromToken,amount:il.value.fromAmount},il.value.toToken={...y.toToken,amount:il.value.toAmount};const[l,n]=[(null==(be=y.fromToken)?void 0:be.address)+"-"+(null==(he=y.fromToken)?void 0:he.chain),(null==(Te=y.toToken)?void 0:Te.address)+"-"+(null==(ye=y.toToken)?void 0:ye.chain)];return Se([l,n]).then((async e=>{var l,a;il.value.from_price=(null==(l=null==e?void 0:e[0])?void 0:l.current_price_usd)||0,il.value.to_price=(null==(a=null==e?void 0:e[1])?void 0:a.current_price_usd)||0,il.value.isERC314=!0})),void(F.value=!1)}}let ze="";if("core"===l&&((null==Le?void 0:Le.length)||0)>0){const e=(null==(ge=null==Le?void 0:Le.find)?void 0:ge.call(Le,(e=>{const l=[e.token0_address,e.token1_address];return l.includes(je.from_token)||l.includes(je.to_token)})))||(null==Le?void 0:Le[0]),l=(null==e?void 0:e.amm)||"",a={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};ze=(null==a?void 0:a[l])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f"}y.isERC314=!1,Ce(je,ze,l).then((e=>{vl.value=e,Dl(e),function(){Vl&&(clearTimeout(Vl),Vl=null);Vl=setTimeout((()=>{var e,l,a,n,o,t,u;El()&&ll.value&&I.address&&!E.value&&(((null==(e=il.value)?void 0:e.isSunPump)||0)>0?Ee(il.value,el.value).then((async e=>{var l;Ye.value={...e,isSunPump:null==(l=il.value)?void 0:l.isSunPump},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=sl.value})).catch((e=>{Ie(e)})):(null==(l=il.value)?void 0:l.isFourMeme)?Ve(il.value,el.value).then((async e=>{Ye.value={...e,isFourMeme:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=sl.value})).catch((e=>{Ie(e)})):(null==(a=il.value)?void 0:a.isERC314)?Ue(il.value).then((async e=>{Ye.value={...e,isERC314:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=sl.value})).catch((e=>{Ie(e)})):(null==(n=il.value)?void 0:n.isDyorswapfun)?Be(il.value,el.value).then((async e=>{Ye.value={...e,isDyorswapfun:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=sl.value})).catch((e=>{Ie(e)})):(null==(o=il.value)?void 0:o.isXflapswap)?De(il.value,el.value).then((async e=>{Ye.value={...e,isXflapswap:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=sl.value})).catch((e=>{Ie(e)})):(null==(u=null==(t=il.value)?void 0:t.routerPath)?void 0:u.length)>0&&(Oe(il.value,el.value).then((async e=>{Ye.value=e,re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=sl.value})).catch((e=>{Ie(e)})),Ul(),Bl()))}),3e3)}()})).catch((l=>{Ie(l),e?kl.value="":pl.value=""})).finally((()=>{setTimeout((()=>{F.value=!1,_l()}),800)}))}}(e,I.chain||"")}),500)):F.value=!1)}let Rl={};function Ml(){const e=y.fromToken.chain,l=y.fromToken.address+"-"+e,a=y.toToken.address+"-"+e;return sessionStorage.swap_tokenPrice===l+"-"+a?(se.value=[0,0],"solana"===e?ee.value=0:"ton"===e?te.value=0:"sui"===e&&(oe.value=0)):sessionStorage.swap_tokenPrice=l+"-"+a,Se([l,a]).then((async l=>{var a,n;const o=(null==(a=null==l?void 0:l[0])?void 0:a.current_price_usd)||0,t=(null==(n=null==l?void 0:l[1])?void 0:n.current_price_usd)||0;se.value=[o,t];const u=pl.value||0,s=kl.value||0,i=Math.abs(Number(u)*o/(Number(s)*t)-1);"solana"===e?ee.value=i:"ton"===e?te.value=i:"sui"===e&&(oe.value=i)}))}function El(){var e,l,a;if(!I.provider)return!0;const n=y.fromToken.balance||0,o=(y.isPump||y.isMoonshot)&&"So11111111111111111111111111111111111111112"!==y.token2.address,t=(y.isFourMeme||y.isFlap||y.isDyorswapfun||y.isXflapswap)&&y.token2.address!==_,u=y.isSunPump>0&&y.token2.address!==_;if("ton"===y.chain){const n=(null==ce?void 0:ce.totalTransferAmount)||0,o=(null==(a=null==(l=null==(e=y.userBalanceTokens)?void 0:e.find)?void 0:l.call(e,(e=>e.address===_)))?void 0:a.initBalance)||0;if(n&&new X(n).gt(o))return!1}return!(0===Number(n)||Number(n)<Number(pl.value)||!I.provider||"0"===String(pl.value)||y.token1.address===y.token2.address||o||t||u)}let Vl=null;function Ul(){const e=y.token1.chain,l=y.token2.chain,a=I.chain;a&&a===e&&a===l&&He(a).then((e=>{Qe.value=e}))}function Bl(){const e=I.chain;if(["solana","ton","sui","tron"].includes(e))return;const l=y.token1.chain,a=y.token2.chain;e&&l===a&&e===l&&je(e).then((e=>{me.value=(null==e?void 0:e.toString())||"0"})).catch((e=>{me.value="0"}))}function Dl(e=vl.value){var l,a,n,o,t,u,s;const i=e[ml.value],r=e[ml.value].routerPath,d=R.value,v=y.fromToken.decimals,c=y.toToken.decimals;let m=!1;if(d){m=ke((null==(l=new X(pl.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${v}})?`)))?void 0:l[0])||"0",v).toFixed(0)===((null==(a=r[0])?void 0:a.amount)||0)}else{m=ke((null==(n=new X(kl.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${c}})?`)))?void 0:n[0])||"0",c).toFixed(0)===((null==(o=r[r.length-1])?void 0:o.amount)||0)}if(!m)return;if(1===i.from_cannot_sell_all){const e=new X(ke(String(y.fromToken.balance),null==(t=y.fromToken)?void 0:t.decimals).toFixed(0)),l=new X(null==i?void 0:i.routerPath[0].amount);q.value=e.gt(0)&&l.div(e).gt(.99999)}else q.value=!1;Z.value=((null==i?void 0:i.totalTax)||0)>0||((null==i?void 0:i.total_sell_tax)||0)>0||((null==i?void 0:i.total_buy_tax)||0)>0;const p=function(e){if(!Number(pl.value)&&!Number(kl.value))return new X(0);const l=e.routerPath,a=(null==l?void 0:l.length)>0?null==l?void 0:l[0]:null,n=(null==l?void 0:l.length)>0?null==l?void 0:l[l.length-1]:null;if(a&&n){const l=e.from_price,o=e.to_price,t=K(a.amount,a.decimals),u=K(n.amount,n.decimals);return new X(t).times(l).div(new X(u).times(o)).minus(1).abs().times(100)}return new X(0)}(i);if(Z.value||p.gt(.5)){G.value=((null==i?void 0:i.total_sell_tax)||0)+((null==i?void 0:i.total_buy_tax)||0)+1>49.99;const e=i.totalTax||(i.total_sell_tax||0)+(i.total_buy_tax||0),l=Number(p);if("auto"===B.value){let a=e+l+(e>5||l>5?2.5:2);a=Math.max(Math.min(a,49.99),.5),U.value=String(Number(a.toFixed(2)))}}else G.value=!1,"auto"===B.value&&(U.value=Jn);if(il.value=i,sl.value=r.map(((e,l)=>{var a,n;return{symbol:e.symbol,nextAmm:(null==(n=null==(a=null==i?void 0:i.pair_path)?void 0:a[l])?void 0:n.amm)||""}})),J.value=vl.value.map((e=>{var l;let a=0,n=0;if(R.value){const n=e.routerPath[e.routerPath.length-1];a=K(n.amount||"0",(null==n?void 0:n.decimals)||(null==(l=y.toToken)?void 0:l.decimals))}else{const l=e.routerPath[0];n=K(l.amount||"0",(null==l?void 0:l.decimals)||y.fromToken.decimals)}return{path:e.routerPath.map(((l,a)=>{var n,o;return{symbol:l.symbol,nextAmm:(null==(o=null==(n=null==e?void 0:e.pair_path)?void 0:n[a])?void 0:o.amm)||""}})),amount:R.value?a:n,priceImpact:e.priceImpact}})),R.value){const e=r[r.length-1];kl.value=K(e.amount||"0",(null==e?void 0:e.decimals)||(null==(u=y.toToken)?void 0:u.decimals))}else{const e=r[0];pl.value=K(e.amount||"0",(null==e?void 0:e.decimals)||(null==(s=y.fromToken)?void 0:s.decimals))}m&&setTimeout((()=>{F.value=!1,_l()}),800)}function Ol(){var e,l,a;const n=I.chain,o=Object.keys(Le).concat(["solana","sui","ton"]),t=y.token1.chain,u=y.token2.chain;return!(t&&!(null==(e=null==o?void 0:o.includes)?void 0:e.call(o,t)))&&(!(u&&!(null==(l=null==o?void 0:o.includes)?void 0:l.call(o,u)))&&(!!n&&(!(n&&!(null==(a=null==o?void 0:o.includes)?void 0:a.call(o,n)))&&(n===t&&n===u))))}function Hl(){var e,l,a,n;if(1===y.activeTab){if(Number(U.value)>Number(null==(e=y.baseTokenExtra)?void 0:e.sell_tax)+1)return;const a=Math.max(Math.min(Number(null==(l=y.baseTokenExtra)?void 0:l.sell_tax)+1,49.99),.5);U.value=String(Number(a.toFixed(2)))}else{if(Number(U.value)>Number(null==(a=y.baseTokenExtra)?void 0:a.buy_tax)+1)return;const e=Math.max(Math.min(Number(null==(n=y.baseTokenExtra)?void 0:n.buy_tax)+1,49.99),.5);U.value=String(Number(e.toFixed(2)))}}function Ll(){var e,l,a,n,o;const t=I.chain,u=Object.keys(Le).concat(["solana","sui","ton"]),s=d(t),r=(null==s?void 0:s.name)||"",v=y.token1.chain,c=y.token2.chain,m=null==(e=d(v))?void 0:e.name,p=null==(l=d(c))?void 0:l.name;return v&&!(null==(a=null==u?void 0:u.includes)?void 0:a.call(u,v))?i("noSupportChain",{chain:m}):c&&!(null==(n=null==u?void 0:u.includes)?void 0:n.call(u,c))?i("noSupportChain",{chain:p}):t&&!(null==(o=null==u?void 0:u.includes)?void 0:o.call(u,t))?i("noSupportChain",{chain:r}):t!==v&&v||t!==c&&c?i("chainNotSame1"):v!==c?i("tokenNoSameChain"):void 0}function zl(){try{if(!I.provider)return void(I.provider||H.alert(i("browserWalletNotDetected"),i("tips"),{confirmButtonText:i("confirm")}));if(!Ol())return;const e=I.chain;if(e!==(y.token1.chain||y.token2.chain||e))return void H.alert(i("plsSwitchChain",{chain:e}),i("tips"),{confirmButtonText:i("confirm")});2===y.swapType&&(bl.value=1,ll.value?ql():async function(){var e,l;V.value=!0;let a=y.isFourMeme?null==(l=null==(e=il.value)?void 0:e.quoteResult)?void 0:l.tokenManager:ue(M.value);const n=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][y.isSunPump];a=n||a,"xlayer"===I.chain&&y.isDyorswapfun&&(a="0xfd947a61e2c54413031ddb1f754dbe0e696efa09");"xlayer"===I.chain&&y.isXflapswap&&(a="0xb30d8c4216e1f21f27444d2ffaee3ad577808678");"gatelayer"===I.chain&&y.isDyorswapfun&&(a="0xC5d6974951201FB5f20C0efB4B6BEF5cf8FF1617");ze(y.fromToken.address,a).then((e=>e.wait())).then((e=>{Al()})).catch((e=>{Ie(e)})).finally((()=>{V.value=!1}))}())}catch(e){}}function Wl(){var e,l,a;const n=y.fromToken.balance||0,o=(y.isPump||y.isMoonshot)&&"So11111111111111111111111111111111111111112"!==y.token2.address,t=(y.isFourMeme||y.isFlap||y.isDyorswapfun||y.isXflapswap)&&y.token2.address!==_,u=y.isSunPump>0&&y.token2.address!==_,s=I.address;if(!s)return i("pConnectWallet");if(s&&!I.provider)return i("observeAddressNotSwap");if(y.isERC314&&y.token2.address!==_||o||t||u)return i("ERC314Tips");if(0===Number(n)||Number(n)<Number(pl.value)||!s)return i("insufficientBalance");if("0"===String(pl.value))return i("AmountCannotBeZero");if("ton"===y.chain){const n=(null==ce?void 0:ce.totalTransferAmount)||0,o=(null==(a=null==(l=null==(e=y.userBalanceTokens)?void 0:e.find)?void 0:l.call(e,(e=>e.address===_)))?void 0:a.initBalance)||0;if(n&&new X(n).gt(o))return i("tonInsufficientBalance")}}function ql(e=!0){var l,a,n,o,t,u,s,r,d,v,c,m;if(Vl&&(clearTimeout(Vl),Vl=null),El())if("sui"===y.chain){const u=null==(t=null==(o=null==(n=null==(a=null==(l=null==de?void 0:de.routes)?void 0:l[0])?void 0:a.hops)?void 0:n[0])?void 0:o.pool)?void 0:t.type,s=[y.fromToken,y.toToken].map(((e,l)=>({symbol:e.symbol,nextAmm:0===l&&u||""})));re.value={swapRouterPath:s,fromAmount:pl.value,toAmount:kl.value,fromToken:y.fromToken,toToken:y.toToken,isAmountOut:!1},e&&(hl.value=!0),sl.value=s}else if("solana"===y.chain){const l=[y.fromToken,y.toToken].map((e=>({symbol:e.symbol,nextAmm:""})));re.value={swapRouterPath:l,fromAmount:pl.value,toAmount:kl.value,fromToken:y.fromToken,toToken:y.toToken,isAmountOut:!1},e&&(hl.value=!0)}else if("ton"===y.chain){const l=[y.fromToken,y.toToken].map(((e,l)=>({symbol:e.symbol,nextAmm:0===l&&(null==ce?void 0:ce.dex)||""})));re.value={swapRouterPath:l,fromAmount:pl.value,toAmount:kl.value,fromToken:y.fromToken,toToken:y.toToken,isAmountOut:!1},e&&(hl.value=!0),sl.value=l}else((null==(u=il.value)?void 0:u.isSunPump)||0)>0?(E.value=!0,Ee(il.value,el.value).then((async l=>{var a;Ye.value={...l,isSunPump:null==(a=il.value)?void 0:a.isSunPump},re.value=l.swapInfo,re.value.gasValue=l.gasValue,re.value.swapRouterPath=sl.value,E.value=!1,e&&(hl.value=!0)})).catch((e=>{E.value=!1,Ie(e)})),Ul(),Bl()):(null==(s=il.value)?void 0:s.isFourMeme)?(E.value=!0,Ve(il.value,el.value).then((async l=>{Ye.value={...l,isFourMeme:!0},re.value=null==l?void 0:l.swapInfo,re.value.gasValue=(null==l?void 0:l.gasValue)||"0",re.value.swapRouterPath=sl.value,E.value=!1,e&&(hl.value=!0)})).catch((e=>{E.value=!1,Ie(e)})),Ul(),Bl()):(null==(r=il.value)?void 0:r.isERC314)?(E.value=!0,Ue(il.value).then((async l=>{Ye.value={...l,isERC314:!0},re.value=l.swapInfo,re.value.gasValue=l.gasValue,re.value.swapRouterPath=sl.value,E.value=!1,e&&(hl.value=!0)})).catch((e=>{E.value=!1,Ie(e)})),Ul(),Bl()):(null==(d=il.value)?void 0:d.isDyorswapfun)?(E.value=!0,Be(il.value,el.value).then((async l=>{Ye.value={...l,isDyorswapfun:!0},re.value=null==l?void 0:l.swapInfo,re.value.gasValue=(null==l?void 0:l.gasValue)||"0",re.value.swapRouterPath=sl.value,E.value=!1,e&&(hl.value=!0)})).catch((e=>{E.value=!1,Ie(e)})),Ul(),Bl()):(null==(v=il.value)?void 0:v.isXflapswap)?(E.value=!0,De(il.value,el.value).then((async l=>{Ye.value={...l,isXflapswap:!0},re.value=null==l?void 0:l.swapInfo,re.value.gasValue=(null==l?void 0:l.gasValue)||"0",re.value.swapRouterPath=sl.value,E.value=!1,e&&(hl.value=!0)})).catch((e=>{E.value=!1,Ie(e)})),Ul(),Bl()):(null==(m=null==(c=il.value)?void 0:c.routerPath)?void 0:m.length)>0&&(E.value=!0,Oe(il.value,el.value).then((async l=>{Ye.value=l,re.value={...l.swapInfo,fromToken:{...l.swapInfo.fromToken,...y.fromToken},toToken:{...l.swapInfo.fromToken,...y.toToken},fromAmount:pl.value,toAmount:kl.value,isAmountOut:l.swapInfo.isAmountOut||!1},re.value.gasValue=l.gasValue,re.value.swapRouterPath=sl.value,E.value=!1,e&&(hl.value=!0)})).catch((e=>{E.value=!1,Ie(e)})),Ul(),Bl());else H.alert(Wl(),i("tips"),{confirmButtonText:i("okay")})}function Xl(e,l){H.alert(l,e,{confirmButtonText:i("getIt")}).then((()=>{}))}function Kl(){var e,l,a,n;if(!pl.value||!kl.value)return"--";let o=pl.value,t=kl.value;if(Z.value){let u=(null==(e=il.value)?void 0:e.totalTax)||((null==(l=il.value)?void 0:l.total_sell_tax)||0)+((null==(a=il.value)?void 0:a.total_buy_tax)||0);u=Math.min(49,u),(null==(n=il.value)?void 0:n.isAmountOut)?o=new X(o).times(100+u).div(100):t=new X(t).times(100-u).div(100)}const u=["solana","sui","ton"].includes(M.value),s=u?se.value[0]:il.value.from_price,i=u?se.value[1]:il.value.to_price;return s&&i?0===y.activeTab?S(Number(pl.value||0)/Number(kl.value)/(i/s)*i):1===y.activeTab?S(Number(kl.value||0)/Number(pl.value)/(s/i)*s):void 0:"--"}function Zl(e){Y.value=!1,ml.value=e,Dl()}async function Gl(e=Ye.value){try{if("solana"===M.value)return void async function(){try{bl.value=1,ie.value=!0,E.value=!0;const e=re.value,l={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:Number(K(e.fromTokenAmount||0,e.fromToken.decimals)),to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:Number(K(e.toTokenAmount||0,e.toToken.decimals)),chain:I.chain,transaction:"",wallet_address:I.address};setTimeout((()=>{hl.value||(E.value=!1,ie.value=!1)}),6e3),We(ve).then((a=>{var n,o;return re.value.transaction=a.hash,rl({chain:"solana",destination:"true"===localStorage.solanaProtection?"v1/blxrsol/sendSolTx":"/ave_nodes/rpc/solana/sendFastSwapTx",type:10,tx_hash:a.hash,status:1,wallet:I.address,out_token:l.to_address,out_amount:e.toAmount,in_token:l.from_address,in_amount:e.fromAmount}),E.value=!1,ie.value=!1,pl.value="",kl.value="",null==(o=null==(n=Q.value)?void 0:n.handleClick)||o.call(n,0),bl.value=3,a.wait()})).then((e=>{var l;return e&&(dl({chain:"solana",tx_hash:null==(l=null==e?void 0:e.transaction)?void 0:l.signatures[0],status:100}),y.getTokenDetails(),y.getUserTokenList()),e})).catch((e=>{"Timeout"===(e||(null==e?void 0:e.message))?qe({type:"error",message:i("timeout_error")}):"Swap fail"===(e||(null==e?void 0:e.message))?qe({type:"error",message:i("swapFail")}):Ie(e,"solana"),xl(),E.value=!1,ie.value=!1}))}catch(e){E.value=!1,ie.value=!1,Ie(e,"solana")}}();if("sui"===M.value)return void async function(){try{ie.value=!0,E.value=!0,bl.value=2;const e=re.value,l={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:null==e?void 0:e.fromAmount,from_decimals:null==e?void 0:e.fromToken.decimals,to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:null==e?void 0:e.toAmount,to_decimals:null==e?void 0:e.toToken.decimals,chain:"sui",transaction:"",wallet_address:I.address};setTimeout((()=>{hl.value||(E.value=!1,ie.value=!1)}),6e3);const a=!0;Xe({quoteResponse:de,slippage:new X(z.value).div(100).toNumber()}).then((e=>Ke((null==e?void 0:e.tx)||e))).then((e=>{var n,o;return(null==e?void 0:e.digest)?(re.value.transaction=e.digest,a&&(l.transaction=e.digest,rl({chain:"sui",destination:"wallet rpc",type:10,tx_hash:e.digest,status:1,wallet:I.address,out_token:l.to_address,out_amount:re.value.toAmount,in_token:l.from_address,in_amount:re.value.fromAmount})),E.value=!1,ie.value=!1,pl.value="",kl.value="",null==(o=null==(n=Q.value)?void 0:n.handleClick)||o.call(n,0),bl.value=3,e.wait()):Promise.reject("Swap fail")})).then((e=>{if(e.digest)return dl({chain:"sui",tx_hash:null==e?void 0:e.digest,status:100}),qe({type:"success",message:i("tradeSuccess")}),y.getTokenDetails(),y.getUserTokenList(),e})).catch((e=>{bl.value=1,E.value=!1,ie.value=!1,Ie(e,"solana"),xl()}))}catch(e){bl.value=1,E.value=!1,ie.value=!1,Ie(e,"solana")}}();if("ton"===M.value)return void async function(){try{ie.value=!0,E.value=!0,bl.value=2;const e=re.value,l={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:null==e?void 0:e.fromAmount,from_decimals:null==e?void 0:e.fromToken.decimals,to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:null==e?void 0:e.toAmount,to_decimals:null==e?void 0:e.toToken.decimals,chain:"ton",transaction:"",wallet_address:I.address};setTimeout((()=>{hl.value||(E.value=!1,ie.value=!1)}),6e3);const a=!0,n=[{address:null==ce?void 0:ce.to,amount:null==ce?void 0:ce.totalTransferAmount,payload:null==ce?void 0:ce.payload}],o=await Ze(l);o&&n.push(o),Ge(n).then((e=>{var n,o;return re.value.transaction=e.hash,rl({chain:"ton",destination:"wallet rpc",type:10,tx_hash:e.hash,status:1,wallet:I.address,out_token:l.to_address,out_amount:re.value.toAmount,in_token:l.from_address,in_amount:re.value.fromAmount}),a&&(l.transaction=e.hash),E.value=!1,ie.value=!1,pl.value="",kl.value="",null==(o=null==(n=Q.value)?void 0:n.handleClick)||o.call(n,0),bl.value=3,e.wait()})).then((async e=>(e?(dl({chain:"ton",tx_hash:null==e?void 0:e.hash,status:100}),qe({type:"success",message:i("tradeSuccess")}),y.getTokenDetails(),y.getUserTokenList()):(dl({chain:"ton",tx_hash:l.transaction,status:-100}),qe({type:"error",message:i("tradeFail")})),e))).catch((e=>{"Timeout"===(e||(null==e?void 0:e.message))?qe({type:"error",message:i("timeout_error")}):"Swap fail"===(e||(null==e?void 0:e.message))?qe({type:"error",message:i("tradeFail")}):Ie(e),bl.value=1,E.value=!1,ie.value=!1,xl()}))}catch(e){bl.value=1,E.value=!1,ie.value=!1,Ie(e)}}();ie.value=!0,E.value=!0;await e.swapCallStatic();const l=e.swapInfo,a=(l.fromToken.isWrapper&&l.toToken.isETH||l.toToken.isWrapper&&l.fromToken.isETH,{from_address:l.fromToken.address,from_symbol:l.fromToken.symbol,from_amount:Number(K(l.fromTokenAmount||0,l.fromToken.decimals)),to_address:l.toToken.address,to_symbol:l.toToken.symbol,to_amount:Number(K(l.toTokenAmount||0,l.toToken.decimals)),chain:M.value,transaction:"",wallet_address:I.address});bl.value=2,Ye.value.swap().then((e=>{var n,o;return re.value.transaction=e.hash,rl({chain:M.value,destination:"wallet rpc",type:10,tx_hash:e.hash,status:1,wallet:I.address,out_token:a.to_address,out_amount:Number(K(l.toTokenAmount||0,l.toToken.decimals)),in_token:a.from_address,in_amount:Number(K(l.fromTokenAmount||0,l.fromToken.decimals))}),E.value=!1,ie.value=!1,pl.value="",kl.value="",null==(o=null==(n=Q.value)?void 0:n.handleClick)||o.call(n,0),bl.value=3,e.wait()})).then((e=>{var l,a;return dl({chain:M.value,tx_hash:e.hash,status:100,to:(null==(a=null==(l=null==e?void 0:e.to)?void 0:l.toLowerCase)?void 0:a.call(l))||""}),ml.value=0,vl.value=[],setTimeout((()=>{y.getTokenDetails(),y.getUserTokenList(),Al(),"tron"!==y.token1.chain&&"tron"!==y.token2.chain||setTimeout((()=>{y.getTokenDetails()}),3e3)}),1e3),e})).catch((e=>{bl.value=1,xl(),E.value=!1,ie.value=!1,Ie(e,"swap")}))}catch(l){E.value=!1,ie.value=!1,Ie(l,"swap")}}return N([()=>y.fromToken.address,()=>I.address],(()=>{y.fromToken.address&&Al()})),N([()=>y.fromToken.address,()=>y.toToken.address],(()=>{pl.value="",kl.value="",ml.value=0,xl()})),(e,l)=>{var a,n,i,d,k,w,A,N,H,q;const X=P,K=D,Z=g;return t(),o(u,null,[v("form",{class:"swap-container",action:"",onSubmit:x(zl,["prevent","stop"])},[v("div",Tn,[v("div",yn,[T(jl,{token:r(y).token1,"onUpdate:token":[l[0]||(l[0]=e=>r(y).token1=e),Sl],tokens:r(y).swapTokens,chain:r(y).chain},null,8,["token","tokens","chain"]),l[26]||(l[26]=v("span",{style:{flex:"1"}},null,-1)),v("div",{class:"s-text",innerHTML:`${e.$t("balance1")}: ${r(S)((null==(a=r(y).token1)?void 0:a.balance)||0)}`},null,8,gn),1===r(y).activeTab?(t(),o("button",{key:0,class:"max-btn",type:"button",onClick:l[1]||(l[1]=x((e=>Nl(100)),["stop"]))},c(e.$t("max")),1)):b("",!0)]),v("div",wn,[0===r(y).activeTab?(t(),p(X,{key:0,modelValue:r(kl),"onUpdate:modelValue":[l[2]||(l[2]=e=>C(kl)?kl.value=e:null),l[3]||(l[3]=e=>{var l;kl.value=null==(l=null==e?void 0:e.replace)?void 0:l.call(e,/\-|[^\d.]/g,""),Fl()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",readonly:r(Tl),onFocus:l[4]||(l[4]=e=>{var l;return null==(l=r(Q))?void 0:l.handleClick(0,!0)})},null,8,["modelValue","readonly"])):b("",!0),1===r(y).activeTab?(t(),p(X,{key:1,modelValue:r(pl),"onUpdate:modelValue":[l[5]||(l[5]=e=>C(pl)?pl.value=e:null),l[6]||(l[6]=e=>{var l;pl.value=null==(l=null==e?void 0:e.replace)?void 0:l.call(e,/\-|[^\d.]/g,""),$l()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",onFocus:l[7]||(l[7]=e=>{var l;return null==(l=r(Q))?void 0:l.handleClick(0,!0)})},null,8,["modelValue"])):b("",!0)])]),v("div",xn,[v("div",_n,[T(jl,{token:r(y).token2,"onUpdate:token":[l[8]||(l[8]=e=>r(y).token2=e),Il],tokens:r(y).swapTokens,chain:r(y).chain},null,8,["token","tokens","chain"]),l[27]||(l[27]=v("span",{style:{flex:"1"}},null,-1)),v("div",{class:"s-text",innerHTML:`${e.$t("balance1")}: ${r(S)(r(y).token2.balance||0)}`},null,8,Sn),0===r(y).activeTab?(t(),o("button",{key:0,class:"max-btn",type:"button",onClick:l[9]||(l[9]=x((e=>Nl(100)),["stop"]))},c(e.$t("max")),1)):b("",!0)]),v("div",In,[1===r(y).activeTab?(t(),p(X,{key:0,modelValue:r(kl),"onUpdate:modelValue":[l[10]||(l[10]=e=>C(kl)?kl.value=e:null),l[11]||(l[11]=e=>{var l;kl.value=null==(l=null==e?void 0:e.replace)?void 0:l.call(e,/\-|[^\d.]/g,""),Fl()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",readonly:r(Tl),onFocus:l[12]||(l[12]=e=>{var l;return null==(l=r(Q))?void 0:l.handleClick(0,!0)})},null,8,["modelValue","readonly"])):b("",!0),0===r(y).activeTab?(t(),p(X,{key:1,modelValue:r(pl),"onUpdate:modelValue":[l[13]||(l[13]=e=>C(pl)?pl.value=e:null),l[14]||(l[14]=e=>{var l;pl.value=null==(l=null==e?void 0:e.replace)?void 0:l.call(e,/\-|[^\d.]/g,""),$l()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",onFocus:l[15]||(l[15]=e=>{var l;return null==(l=r(Q))?void 0:l.handleClick(0,!0)})},null,8,["modelValue"])):b("",!0)])]),T(hn,{ref:"percentStepInf",activeColor:0===r(y).activeTab?("upColor"in e?e.upColor:r(be))[0]:("downColor"in e?e.downColor:r(he))[0],onChange:Nl},null,8,["activeColor"]),r(I).address?r(I).address&&!r(I).provider?(t(),p(K,{key:1,"native-type":"button",class:"submit-btn",disabled:"",color:"#555555"},{default:f((()=>[O(c(e.$t("watchWalletNotSwap")),1)])),_:1})):Ol()?r(ll)?(t(),p(K,{key:4,class:"submit-btn",loading:r(E)||r(F)||r($),color:r(tl),disabled:r(al)&&(null==(i=null==(n=r(al))?void 0:n.gt)?void 0:i.call(n,.4))||!El()||!r(pl)||!r(kl),"native-type":"submit"},{default:f((()=>{var l,a,n,s,i;return[0===Number(r(y).fromToken.balance)||Number(r(y).fromToken.balance)<Number(r(pl))||""===r(I).address||(r(y).isERC314||r(y).isFourMeme||r(y).isFlap||r(y).isSunPump>0||r(y).isDyorswapfun||r(y).isXflapswap)&&r(y).token2.address!==("NATIVE_TOKEN"in e?e.NATIVE_TOKEN:r(_))||(r(y).isPump||r(y).isMoonshot)&&"So11111111111111111111111111111111111111112"!==r(y).token2.address||r(yl)?(t(),o("span",An,c(Wl()),1)):r(al)&&(null==(a=null==(l=r(al))?void 0:l.gt)?void 0:a.call(l,.4))?(t(),o("span",Nn,c(e.$t("priceImpactTooHigh")),1)):(t(),o(u,{key:2},[v("span",null,c(r(al)&&(null==(s=null==(n=r(al))?void 0:n.gt)?void 0:s.call(n,.1))?0===r(y).activeTab?e.$t("buyAnyway"):e.$t("sellAnyway"):0===r(y).activeTab?e.$t("buy"):e.$t("sell"))+" "+c((null==(i=r(y).token1)?void 0:i.symbol)||""),1),r(ul)?(t(),o("span",{key:0,style:{"font-size":"12px"},innerHTML:r(ul)},null,8,$n)):b("",!0)],64))]})),_:1},8,["loading","color","disabled"])):(t(),p(K,{key:3,class:"submit-btn",color:r(tl),"native-type":"submit",loading:r(V)||r(E)||r($),disabled:Number(r(y).fromToken.balance)<Number(r(pl))},{default:f((()=>{var l,a;return[O(c(0===Number(r(y).fromToken.balance)||Number(r(y).fromToken.balance)<Number(r(pl))||""===r(I).address?r(al)&&(null==(a=null==(l=r(al))?void 0:l.gt)?void 0:a.call(l,.4))?e.$t("priceImpactTooHigh"):Wl()||e.$t("approve"):e.$t("approve")),1)]})),_:1},8,["color","loading","disabled"])):(t(),p(K,{key:2,"native-type":"button",class:"submit-btn",disabled:"",color:"#555555"},{default:f((()=>[O(c(Ll()),1)])),_:1})):(t(),p(K,{key:0,"native-type":"button",class:"submit-btn",color:"#286DFF",onClick:l[16]||(l[16]=x((l=>("useBotStore"in e?e.useBotStore:r(ye))().changeConnectVisible(!0,1)),["stop"]))},{default:f((()=>[O(c(e.$t("pConnectWallet")),1)])),_:1})),v("ul",Fn,[v("li",Cn,[v("span",null,c(e.$t("slippage")),1),T(Z,{class:"ml-2px color-[--secondary-text]! clickable",name:"material-symbols:help-outline",onClick:l[17]||(l[17]=x((l=>Xl(e.$t("slippage"),e.$t("minimumReceivedTips"))),["stop"]))}),l[28]||(l[28]=v("span",{style:{flex:"1"}},null,-1)),"solana"===r(M)?(t(),p(ea,{key:0,slippage:r(L),"onUpdate:slippage":l[18]||(l[18]=e=>C(L)?L.value=e:null),canSetAuto:!1},null,8,["slippage"])):(null==(d=["sui","ton"])?void 0:d.includes(r(M)))?(t(),p(ea,{key:1,slippage:r(z),"onUpdate:slippage":l[19]||(l[19]=e=>C(z)?z.value=e:null),canSetAuto:!1},null,8,["slippage"])):(t(),p(ea,{key:2,slippage:r(B),"onUpdate:slippage":l[20]||(l[20]=e=>C(B)?B.value=e:null),autoSlippage:r(U)},null,8,["slippage","autoSlippage"]))]),h(v("li",null,[v("div",Pn,[v("span",null,c(e.$t("estimatedAveragePrice")),1)]),v("div",Rn,[v("span",null,"$"+c(Kl()),1)])],512),[[j,r(pl)&&r(kl)]]),h(v("li",null,[v("div",Mn,[v("span",null,c(e.$t("priceImpact")),1),v("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:l[21]||(l[21]=x((l=>Xl(e.$t("priceImpact"),e.$t("priceImpactTips"))),["stop"]))})]),v("div",{style:W({color:r(ol)})},c(r(nl))+c(r(al)&&(null==(w=null==(k=r(al))?void 0:k.gt)?void 0:w.call(k,.05))?`(${e.$t("excessivePriceImpact")})`:""),5)],512),[[j,r(pl)&&r(kl)&&!r(y).isDyorswapfun]]),h(v("li",null,[v("div",En,[v("span",null,c(e.$t("tokenRoute")),1),v("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:l[22]||(l[22]=x((l=>Xl(e.$t("tokenRoute"),e.$t("tokenRouteTips"))),["stop"]))})]),(null==(A=["solana","sui"])?void 0:A.includes(r(M)))?(t(),o("div",Vn,[(t(!0),o(u,null,s([r(y).fromToken,r(y).toToken],((e,l)=>(t(),o(u,{key:l},[0!==l?(t(),o("img",Un)):b("",!0),e.symbol?(t(),o("span",Bn,c(e.symbol),1)):b("",!0)],64)))),128))])):"ton"===r(M)?(t(),o("div",Dn,[(t(!0),o(u,null,s(r(sl),((e,a)=>(t(),o(u,{key:a},[e.symbol?(t(),o("span",On,c(e.symbol),1)):b("",!0),e.nextAmm&&"unknown"!==e.nextAmm?(t(),o("div",Hn,[v("img",{class:"icon-amm-logo rounded",src:`${r(m).token_logo_url}swap/${e.nextAmm}.jpeg`,alt:"",srcset:"",onerror:"this.src='/icon-default.png'"},null,8,jn),l[29]||(l[29]=v("img",{style:{width:"15px",margin:"1px 5px 0"},src:fl,alt:"",srcset:""},null,-1))])):b("",!0)],64)))),128))])):1===(null==(N=r(il))?void 0:N.toWrapper)||2===(null==(H=r(il))?void 0:H.toWrapper)?(t(),o("div",Ln,[(t(!0),o(u,null,s(r(sl),((e,l)=>(t(),o(u,{key:l},[0!==l?(t(),o("img",zn)):b("",!0),e.symbol?(t(),o("span",Wn,c(e.symbol),1)):b("",!0)],64)))),128))])):(t(),o("div",{key:3,class:"path-list clickable",onClick:l[23]||(l[23]=x((e=>!r(y).isFourMeme&&!r(y).isSunPump&&(Y.value=!0)),["stop","prevent"]))},[(t(!0),o(u,null,s(r(sl),((e,a)=>(t(),o(u,{key:a},[e.symbol?(t(),o("span",qn,c(e.symbol),1)):b("",!0),e.nextAmm&&"unknown"!==e.nextAmm?(t(),o("div",Xn,[v("img",{class:"icon-amm-logo rounded",src:`${r(m).token_logo_url}swap/${e.nextAmm}.jpeg`,alt:"",srcset:"",onerror:"this.src='/icon-default.png'"},null,8,Kn),l[30]||(l[30]=v("img",{style:{width:"15px",margin:"1px 5px 0"},src:fl,alt:"",srcset:""},null,-1))])):b("",!0)],64)))),128)),r(J).length>0?(t(),o("i",Zn)):b("",!0)]))],512),[[j,r(pl)&&r(kl)]]),!(null==(q=["solana","sui","ton","tron"])?void 0:q.includes(r(M)))&&Number(r(Je))>0?(t(),o("li",Gn,[v("div",Qn,c(e.$t("estimatedGas")),1),v("div",null,"≈ $"+c(r(Je)),1)])):b("",!0)])],32),T(ca,{visible:r(Y),"onUpdate:visible":l[24]||(l[24]=e=>C(Y)?Y.value=e:null),listRouter:r(J),isAmount:r(R),selectedRouterIndex:r(ml),onGetSelectedRouter:Zl},null,8,["visible","listRouter","isAmount","selectedRouterIndex"]),T(mn,{visible:r(hl),"onUpdate:visible":l[25]||(l[25]=e=>C(hl)?hl.value=e:null),swapInfo:r(re),swapQuoteInfo:r(il),slippage:"solana"===r(M)?r(L):"ton"===r(M)||"sui"===r(M)?r(z):r(el),loading:r(ie),chain:r(M),nativePrice:r(Qe),gasPrice:r(me),activeShow:r(bl),onSubmit:Gl},null,8,["visible","swapInfo","swapQuoteInfo","slippage","loading","chain","nativePrice","gasPrice","activeShow"])],64)}}}),[["__scopeId","data-v-ae1377c6"]]),eo=e({__name:"swap",setup(e){const l=pn(),a=Qe((()=>Ye((()=>import("./DIyEWMjP.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url))),s=n((()=>0===l.swapType||1===l.swapType?a:Yn));return(e,a)=>(t(),o(u,null,[T(pl,{tab:r(l).swapType,"onUpdate:tab":a[0]||(a[0]=e=>r(l).swapType=e)},null,8,["tab"]),(t(),p(Je(r(s))))],64))}}),lo=e({__name:"index",setup(e){const a=l(),n=pn(),u=le();return N([()=>{var e;return(null==(e=u.token)?void 0:e.token)||""},()=>a.chain,()=>a.address],(()=>{var e;(null==(e=u.token)?void 0:e.token)&&n.init()})),el((()=>{})),(e,l)=>(t(),o("div",null,[T(ml,{activeTab:r(n).activeTab,"onUpdate:activeTab":l[0]||(l[0]=e=>r(n).activeTab=e)},null,8,["activeTab"]),T(eo)]))}}),ao=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"}));export{hn as P,jl as S,ea as a,ao as i,pn as u};
